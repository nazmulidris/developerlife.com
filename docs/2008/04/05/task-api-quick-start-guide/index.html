<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Task API (1 of 3) - Quick Start Guide | developerlife.com</title>
<meta name="generator" content="Jekyll v4.4.1" />
<meta property="og:title" content="Task API (1 of 3) - Quick Start Guide" />
<meta name="author" content="Nazmul Idris" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Introducing the Task API. Easy to use background task API for Swing. Android and JavaME implementation coming soon. Easily create tasks and monitor their progress and cancel them at any time. Easily manage multiple tasks. Create network aware tasks and recurring tasks, and much much more! The API is open source (Apache 2.0 license). Enjoy!!!" />
<meta property="og:description" content="Introducing the Task API. Easy to use background task API for Swing. Android and JavaME implementation coming soon. Easily create tasks and monitor their progress and cancel them at any time. Easily manage multiple tasks. Create network aware tasks and recurring tasks, and much much more! The API is open source (Apache 2.0 license). Enjoy!!!" />
<link rel="canonical" href="http://developerlife.com/2008/04/05/task-api-quick-start-guide/" />
<meta property="og:url" content="http://developerlife.com/2008/04/05/task-api-quick-start-guide/" />
<meta property="og:site_name" content="developerlife.com" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2008-04-05T19:00:00-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Task API (1 of 3) - Quick Start Guide" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Nazmul Idris"},"dateModified":"2008-04-05T19:00:00-05:00","datePublished":"2008-04-05T19:00:00-05:00","description":"Introducing the Task API. Easy to use background task API for Swing. Android and JavaME implementation coming soon. Easily create tasks and monitor their progress and cancel them at any time. Easily manage multiple tasks. Create network aware tasks and recurring tasks, and much much more! The API is open source (Apache 2.0 license). Enjoy!!!","headline":"Task API (1 of 3) - Quick Start Guide","mainEntityOfPage":{"@type":"WebPage","@id":"http://developerlife.com/2008/04/05/task-api-quick-start-guide/"},"url":"http://developerlife.com/2008/04/05/task-api-quick-start-guide/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css" />

  <!-- Add favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

  <!-- Add fontawesome (only for bio.html page) -->
  <link
    rel="stylesheet"
    href="https://use.fontawesome.com/releases/v5.2.0/css/all.css"
    integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ"
    crossorigin="anonymous"
  /><link type="application/atom+xml" rel="alternate" href="http://developerlife.com/feed.xml" title="developerlife.com" /><!-- https://developers.google.com/analytics/devguides/collection/gtagjs -->
<script async
        src="https://www.googletagmanager.com/gtag/js?id=G-NQY9ECC58H"></script>
<script>
  window.dataLayer = window.dataLayer || []

  function gtag() {
    window.dataLayer.push(arguments)
  }

  gtag("js", new Date())
  gtag("config", "G-NQY9ECC58H")
</script>
</head>
<body><!-- https://github.com/mermaid-js/mermaid/blob/develop/docs/n00b-gettingStarted.md -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

<script>
  // https://mermaid-js.github.io/mermaid/#/theming
  mermaid.initialize({
    startOnLoad: true,
    theme: "dark",
    themeVariables: {
      fontFamily: "Fira Code",
      fontSize: "0.95rem",
      darkMode: true,
      primaryColor: "#2f9ece",
      mainBkg: "#303439",
    },
  })
</script>
<header class="site-header" role="banner">

    <div class="wrapper header-wrapper"><div class="logo-container">
        <div class="logo-image">
          <a class="site-title"
             rel="author"
             href="/">
              <!-- This is the logo image placeholder. -->
                <picture>
                  <source srcset="/assets/dl-logo-icon-dark.svg" media="(max-width: 600px)"/>
                  <img  src="/assets/dl-logo-icon-and-text-dark.svg" />
                </picture>
          </a>
        </div>
      </div><nav class="site-nav">
            <input type="checkbox" id="nav-trigger" class="nav-trigger"/>
            <label for="nav-trigger">
          <span class="menu-icon">
              <svg class="svg-icon">
              <use xlink:href="/assets/minima-social-icons.svg#menu">
              </use>
            </svg>
          </span>
            </label>

            <div class="trigger"><!--
    Iterate over all the pages in the site, where page_cursor holds the current
    page for each pass of the for loop.
    Note that page is the currently loaded page itself.
--><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Android/"> Android </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/CC/"> Concurrency </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/CLI/"> CLI </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/CS/"> CS </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/DB/"> Database </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/DI/"> DI </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/FE/"> Frontend </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Hardware/"> Hardware </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/IJ/"> IntelliJ </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/KT/"> Kotlin </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Linux/"> Linux </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/MP/"> MP </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Misc/"> Misc </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Node/"> Node </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Productivity/"> Productivity </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/RN/"> React-Native </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/React/"> React </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Rust/"> Rust </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Server/"> Server </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/State/"> State-Management </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Stories/"> Stories </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/TDD/"> Testing </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/TS/"> TypeScript </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/TUI/"> TUI </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Web/"> Web </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/about-me/"> Nazmul Idris </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/about-site/"> About Us </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/authors/"> Authors </a></div>
        </nav></div>
</header>

<!-- Debug to show the value of page.title and page.category variables -->
<!--<pre>page_cursor.exclude = nil</pre>-->
<!--<pre>page.exclude = nil</pre>-->
<!--<pre>page.title = &quot;Task API (1 of 3) - Quick Start Guide&quot;</pre>-->
<!--<pre>page.category = nil</pre>-->
<!--<pre>page.title (json) = Task API (1 of 3) - Quick Start Guide</pre>-->
<!--<pre>page.category (json) = </pre>-->
<div class="page-and-sidebar-wrapper">
      <main class="page-content" aria-label="Content">
        <div class="wrapper"><article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Task API (1 of 3) - Quick Start Guide</h1>

    <!-- Create all the variables needed for this page (and all the includes) -->
    

    <div class="post-meta">
        <p>
            <!-- Date -->Apr 5, 2008

            <!--Author-->
            ‚àô <a href="/about-me">Nazmul Idris</a>

            <!-- One line social blurb --><ul class="contact-list">
    <li class="p-name">Hi, I'm
            <a href="/about-me">Nazmul</a>,
            an ex-Googler, <a href="https://github.com/r3bl-org/r3bl-open-core/tree/main/tui" target="_blank">r3bl_tui maintainer</a>, SWE, entrepreneur, designer, leader,
            TaiChi-er, racer, storyteller.
            <!-- This is fontawesome icon -->
            I <i class="fas fa-heart"></i>
            leadership, authenticity, play, hope,
            <i class="fas fa-code"></i>,
            <i class="fas fa-terminal"></i>, &
            <i class="fas fa-coffee"></i>,
            üòÉ.</li>
</ul>
</p>
    </div><div class="social-media-container">
  <!-- <iframe
    src="https://github.com/sponsors/nazmulidris/button"
    title="Sponsor nazmulidris"
    height="35"
    width="116"
    style="border: 0; padding-right: 6px"
  ></iframe> -->

  <p class="social-media-item">
    <a
      href="mailto:hello@r3bl.com"
      target="_blank"
      title="Email us at hello@r3bl.com"
    >
      <svg class="svg-icon">
        <use xlink:href="/assets/minima-social-icons.svg#email"></use>
      </svg>
    </a>
  </p>

  <p class="social-media-item">
    <a href="https://r3bl.com/#services" target="_blank" title="Need help with code?">
      <img class="svg-icon" src="https://r3bl.com/images/logo.svg" alt="R3BL Logo">
    </a>
  </p><p class="social-media-item">
    <a
      href="https://www.youtube.com/channel/UCMcsxfCwzwDevc3NRqFgfEg"
      target="_blank"
      title="developerlife.com YouTube channel"
    >
      <svg class="svg-icon">
        <use xlink:href="/assets/minima-social-icons.svg#youtube"></use>
      </svg>
    </a>
  </p><p class="social-media-item">
    <a
      href="https://www.linkedin.com/in/nazmulidris"
      target="_blank"
      title="Nazmul Idris LinkedIn profile"
    >
      <svg class="svg-icon">
        <use xlink:href="/assets/minima-social-icons.svg#linkedin"></use>
      </svg>
    </a>
  </p><p class="social-media-item">
    <a
      href="https://www.github.com/nazmulidris" target="_blank" title="Nazmul Idris github profile">
      <svg class="svg-icon">
        <use xlink:href="/assets/minima-social-icons.svg#github"></use>
      </svg>
    </a>
  </p><p class="social-media-item">
    <a href="/feed.xml" target="_blank" title="RSS feed">
      <svg class="svg-icon">
        <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
      </svg>
    </a>
  </p></div>
</header>
<div class="post-content e-content" itemprop="articleBody">
        <!-- If a page has a hero-image defined in it, then show it here -->


        <!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

<ul>
  <li><a href="#motivation---why">Motivation - why?</a></li>
  <li><a href="#introduction---what-is-it">Introduction - what is it?</a></li>
  <li><a href="#background---threads-101">Background - threads 101</a></li>
  <li><a href="#welcome-to-the-task-api">Welcome to The Task API</a></li>
  <li><a href="#architecture---how">Architecture - how?</a>
    <ul>
      <li><a href="#simpletask-simply">SimpleTask, simply</a></li>
      <li><a href="#simpletask-more-control">SimpleTask, more control</a></li>
    </ul>
  </li>
  <li><a href="#example---getting-your-hands-dirty">Example - getting your hands dirty</a>
    <ul>
      <li><a href="#what-does-the-sampleapp-do">What does the SampleApp do?</a></li>
      <li><a href="#learning-the-api-play-with-this-app">Learning the API‚Ä¶ play with this app</a></li>
      <li><a href="#instantiating-a-simpletask">Instantiating a SimpleTask</a></li>
      <li><a href="#the-functor-taskexecutor">The functor (TaskExecutor)</a></li>
      <li><a href="#the-handler-taskhandler">The handler (TaskHandler)</a></li>
      <li><a href="#reporting-task-status">Reporting Task Status</a></li>
      <li><a href="#reporting-progress-status-via-uihook">Reporting Progress Status (via UIHook)</a></li>
      <li><a href="#cancel-task-via-uihook">Cancel Task (via UIHook)</a></li>
    </ul>
  </li>
  <li><a href="#more-details">More details</a></li>
  <li><a href="#misc-notes">Misc notes</a></li>
  <li><a href="#download---i-want-the-code-now">Download - I want the code now!</a></li>
</ul>

<!-- END doctoc generated TOC please keep comment here to allow auto update -->
      <h2 id="motivation---why">
        
        
          Motivation - why? <a href="#motivation---why">#</a>
        
        
      </h2>
    

<p>I‚Äôve been building a RIA (Rich Internet Application) platform for the past year, which delivers
applications and services to the desktop, web, and mobile environments. While building a service
enabled desktop application container, that‚Äôs capable of connecting to 10‚Äôs of services
simultaneously, I encountered some challenges with keeping the user interface responsive. As you
know, if you execute long running tasks on the EDT, then your UI will freeze up.
<a href="http://java.sun.com/javase/6/docs/api/javax/swing/SwingWorker.html">SwingWorker</a> does help a lot,
but I found myself writing too much boilerplate code when using SwingWorker to create tasks.
SwingWorker is too ‚Äúlow-level‚Äù for my requirements, but it‚Äôs a great starting point. Also, I needed
to be able to monitor the progress of these long running tasks, and I needed the ability to
cancel/abort any task at any time. For long running tasks that perform a lot of network I/O, I
wanted this interruption/cancellation to be immediate as well. I also needed the ability to easily
stop/start these tasks and manage lots of them. As I worked with SwingWorker to implement these
types of functionality it quickly became apparent to me that there‚Äôs a need for a background task
API. So I wrote one for my platform in the last year, and I‚Äôve decided to open source it on
developerlife.com.</p>

<p>I evaluated the use of <a href="http://jcp.org/en/jsr/detail?id=296">JSR 296</a>, but it didn‚Äôt offer me enough
functionality over SwingWorker, and the API is too simplistic for my requirements. SwingWorker is
too simplistic as well, so I wanted a ‚Äòhigher level‚Äô API that makes it REALLY EASY for a novice
programmer to create tasks that don‚Äôt hang up the EDT. Another reason for me NOT to choose JSR 296
is my requirement to have the Task API ported to Android and Java ME. I will release these
implementations on developerlife.com in the future, once they‚Äôve been tested adequately.</p>
      <h2 id="introduction---what-is-it">
        
        
          Introduction - what is it? <a href="#introduction---what-is-it">#</a>
        
        
      </h2>
    

<p>This tutorial is the first of a 5 part series to introduce the Task API. The goal of this tutorial
is to get you up to speed as soon as possible with the API. The other 4 tutorials go into great
detail on various aspects of the Task API. The Task API delivers a lot of functionality, and I feel
that you will find it to be an easy, intuitive, and powerful API to work with. One of my challenges
was to keep the API simple enough for novices, while not removing any of the power. The API has
changed quite a bit since it was first conceived, and we at ScreamingToaster use it in all our
desktop apps, and based on that usage the API has matured. Please feel free to add to the API or
point out flaws or improvements, since it is open source
(<a href="http://www.apache.org/licenses/LICENSE-2.0.html">Apache 2.0 license</a>).</p>
      <h2 id="background---threads-101">
        
        
          Background - threads 101 <a href="#background---threads-101">#</a>
        
        
      </h2>
    

<p>If you are not familiar with threading or EDT, then you can learn more about threads in the
<a href="http://www.amazon.com/gp/product/0321349601/104-6050793-5284701?ie=UTF8&amp;tag=developerlife-20&amp;linkCode=xm2&amp;camp=1789&amp;creativeASIN=0321349601">Concurrency in Practice</a>
book. You can learn more about the Event Dispatch Thread (EDT) in the
<a href="http://www.amazon.com/gp/product/0132413930/104-6050793-5284701?ie=UTF8&amp;tag=developerlife-20&amp;linkCode=xm2&amp;camp=1789&amp;creativeASIN=0132413930">Filthy Rich Clients</a>
book.</p>
      <h2 id="welcome-to-the-task-api">
        
        
          Welcome to The Task API <a href="#welcome-to-the-task-api">#</a>
        
        
      </h2>
    

<p>Here is a quick introduction to what the API allows you to do:</p>

<ol>
  <li>
    <p>The Task API allows a novice programmer to quickly write code that executes in the ‚Äòbackground‚Äô,
and not the EDT. You don‚Äôt have to be a multithreading expert to work with this API - that‚Äôs the
whole point! üòÉ</p>
  </li>
  <li>
    <p>Additionally it allows you to monitor the progress of these background tasks, and allows you to
interrupt their operation at any time. It can monitor any network I/O for you, automatically. So
if you have a task perform any HTTP operations, then the Task API will report the progress of
data being sent/received over the network, without you having to write any code!</p>
  </li>
  <li>
    <p>It allows you to create ‚Äúnetwork aware‚Äù tasks, which will only run if network access is enabled.
Think of ‚Äòoffline mode‚Äô in Microsoft Outlook or Mozilla Firefox. You can put theses tasks in
offline mode, and these tasks won‚Äôt run; then when you put them in online mode, they will execute
again.</p>
  </li>
  <li>
    <p>It allows you to create ‚Äúrecurring‚Äù tasks. These are tasks that execute some code every couple of
minutes or seconds, and you can specify what this delay is.</p>
  </li>
  <li>
    <p>It allows you to manage multiple tasks. You can start a lot of different tasks and have their
progress and status monitored at all times. You can even shut them down selectively, by sending a
‚Äòkill signal‚Äô to a subset of the tasks, or you can shut the ‚Äúwhole thing‚Äù down. This allows you
to create applications in which you can report background tasks being executed, like Outlook, Mac
Mail, and most IDEs.</p>
  </li>
</ol>

<p>These are just some of the high level features/functionality provided to you by the Task API. I
wanted to make sure that there was copious documentation in the source code of the API itself, but
not just stop there, and create detailed tutorials with real world examples that you can use as a
starting point for your projects that use this API. These tutorials will explain the Task API
functionality via rich examples that are included as samples in the API distribution itself. On that
note, let‚Äôs dive right into the API!</p>
      <h2 id="architecture---how">
        
        
          Architecture - how? <a href="#architecture---how">#</a>
        
        
      </h2>
    

<p>If you are familiar with
<a href="http://my.safaribooksonline.com/9780132413930/ch02lev1sec5#snippet?cid=2008_developerlife_RIA_link">SwingWorker</a>,
then you will know that you work with it by creating a subclass (or anonymous inner class
implementation) in which you define a doInBackground() method. Then you execute the task, and you
have the option of canceling it. Instead of taking this approach of making inner class
implementations in-line, the Task API works via a set of handlers and
<a href="http://en.wikipedia.org/wiki/Functor">functor</a>s that you simply attach to a Task to tell it:</p>

<ol>
  <li>
    <p>what to execute in the background</p>
  </li>
  <li>
    <p>what to do when the task completes successfully, or fails, or gets interrupted.</p>
  </li>
</ol>

<p>You can also listen to bound properties (JavaBeans style properties) that will report status
changes, progress updates, etc. It makes it very easy to work with the API, and if you‚Äôre used to
writing event driven code, then this approach is very natural. There is a whole host of support
classes that are provided to make your life really easy when working with these tasks - their
functors, handlers, and listeners. I‚Äôve worked very hard to make this API easy to use‚Ä¶ it‚Äôs not a
‚Äòlazy‚Äô implementation on my part‚Ä¶ I‚Äôve worked very hard so that you don‚Äôt have to! üòÉ . Another
nice feature the API has is that it auto-cleans up resources, and auto-stops things, making it
relatively easy to manage the lifecycle of these tasks and the resources &amp; hooks (listeners, etc)
that they consume. More on this in the other tutorials.</p>

<p>The following diagram illustrates the basic architecture of the API:</p>

<p><img src="/assets/taskapi-1.png" alt="" /></p>
      <h4 id="simpletask-simply">
        
        
          SimpleTask, simply <a href="#simpletask-simply">#</a>
        
        
      </h4>
    

<p>The simplest way to use the Task API is to use the SimpleTask class. You simply create a SimpleTask,
give it a name and description, and specify which signal it should stop on (more on this later).
However, the SimpleTask will do nothing at this stage, if it‚Äôs started, stopped, restarted, or
shutdown. You must now provide a functor (TaskExecutor implementation) that performs your background
operation - the Task API will take care of running this on a non EDT thread - you don‚Äôt have to
create a SwingWorker implementation. This functor requires you to provide an implementation of the
doInBackground(‚Ä¶) method just like SwingWorker. This is the bare minimum that you need to do in
order to create a background task. Then you simply tell your SimpleTask to execute(). That‚Äôs it! If
you want to abort it, then you just call cancel(). If you want to kill it permanently, then call
shutdown(). I tried to keep the feel of the API very SwingWorker-esque.</p>
      <h4 id="simpletask-more-control">
        
        
          SimpleTask, more control <a href="#simpletask-more-control">#</a>
        
        
      </h4>
    

<p>This is where the Task API sets itself apart from the SwingWorker and JSR 296. In order to exert
more control on how to respond to your background operation, you can create a TaskHandler, which is
a collection of callbacks from the Task API into your code. These callbacks are where you get to
specify what your code should do in response to certain events:</p>

<ol>
  <li>
    <p>Any prep work before the background task actually starts executing</p>
  </li>
  <li>
    <p>Notification that the task has stopped executing (may have been interrupted, successfully
completed, or been interrupted)</p>
  </li>
  <li>
    <p>What to do when the task completes successfully - both the functor (TaskExecutor) and handler
(TaskHandler) support generics, and you can specify a type that will be returned by the
background functor (TaskExecutor) and passed to the handler (TaskHandler).</p>
  </li>
  <li>
    <p>What to do when the task produces an exception - you can provide code here to respond to an error
condition.</p>
  </li>
  <li>
    <p>What to do when the task is canceled by the user - you can provide code here to hand user
cancellation/interruptions.</p>
  </li>
</ol>

<p>To make your life easy, adapters are provided for writing these handlers, so you only have to
implement the methods that you need!</p>

<p>You can also attach property change listeners to your SimpleTask to get notified when status
messages are created. You can even provide what these messages should be in the functor
(TaskExecutor) implementation. Additionally, you can track the progress of any network operations
performed in the functor via a SwingUIHookAdapter object. You can also interrupt network IO at any
time, along with background task execution (for non network IO tasks).</p>

<p>There‚Äôs even more that you can do with the Task API, like autoshutdown and task management, and
network aware, and recurring tasks. More on these features in the other tutorials.</p>
      <h2 id="example---getting-your-hands-dirty">
        
        
          Example - getting your hands dirty <a href="#example---getting-your-hands-dirty">#</a>
        
        
      </h2>
    

<p>As part of the Task API distribution, there are a set of sample applications included to demonstrate
the usage of the API. The first one is ‚ÄúPart 1 - Sample Application using Task API. Using SimpleTask
and HTTP GET.‚Äù If you‚Äôve downloaded the code, you can find this class here -
Samples.Part1.SampleApp. This class has a main() method that you can run. Use your favorite IDE to
load this class up and follow along below. If you have IDEA 7, then the you can just open the
taskapi.ipr project file and run it from the Run menu on your toolbar.</p>
      <h4 id="what-does-the-sampleapp-do">
        
        
          What does the SampleApp do? <a href="#what-does-the-sampleapp-do">#</a>
        
        
      </h4>
    

<p>What does this app do? It simply performs an HTTP GET operation on the given URI (in the text field)
and it shows you the progress of the network IO operation and it allows you to cancel it in flight.
Also, if the URI resolves to an image, it tries to display it in a JFrame, that you can dispose
simply by clicking on it anywhere. You can provide URI‚Äôs that resolve to other files, that aren‚Äôt
images, and they won‚Äôt be displayed.</p>

<p>Here‚Äôs a screenshot of this sample app in action:</p>

<p><img src="/assets/taskapi-2.png" alt="" /></p>

<p>Once you start the application (and you‚Äôre connected to the Internet), you get the following:</p>

<p><img src="/assets/taskapi-3.png" alt="" /></p>
      <h4 id="learning-the-api-play-with-this-app">
        
        
          Learning the API‚Ä¶ play with this app <a href="#learning-the-api-play-with-this-app">#</a>
        
        
      </h4>
    

<p>Pretty cool app, eh? üòÉ . I suggest that you play with the application to learn the API. You can
download it <a href="/assets/taskapi.zip">here</a>. Try doing the following:</p>

<ol>
  <li>
    <p>Click on Start Task, then Cancel, and see what it does.</p>
  </li>
  <li>
    <p>Try and start multiple tasks.</p>
  </li>
  <li>
    <p>Try to click on Cancel Task and see how it‚Äôs different from clicking on Cancel UIHook.</p>
  </li>
  <li>
    <p>Click on Shutdown Task while a task is running and see what happens. Try starting a task once
it‚Äôs been shutdown to see what happens.</p>
  </li>
  <li>
    <p>Change the various check boxes (Enable Send/Enable Receive, and start the task again.</p>
  </li>
  <li>
    <p>Change the task progress message ‚ÄúGetting an image from the web‚Ä¶‚Äù, and start a task to see what
happens.</p>
  </li>
</ol>

<p>As you‚Äôre learning how to use the SimpleTask class be sure to play with this sample app, as it will
show you what the API does graphically‚Ä¶ Mouse over any part of the interface and tooltips are
provided to give you more details about what each UI element actually does. Try typing in a
different URI and see what happens, etc. Playing with this SampleApp will allow you to learn lots of
nuances of the Task API. There are a lot of support classes provided to enable the rich graphical
interface that you see - I will not cover them in this tutorial, but keep your eyes peeled for more
tutorials on developerlife.com on this subject.</p>

<p>Let‚Äôs step through the Task API related classes that make this demo tick.</p>
      <h4 id="instantiating-a-simpletask">
        
        
          Instantiating a SimpleTask <a href="#instantiating-a-simpletask">#</a>
        
        
      </h4>
    

<p>Here‚Äôs the code to actually instantiate a SimpleTask:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">_task</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">SimpleTask</span><span class="o">(</span>
    <span class="k">new</span> <span class="nf">TaskManager</span><span class="o">(),</span>
    <span class="n">functor</span><span class="o">,</span>
    <span class="s">"HTTP GET Task"</span><span class="o">,</span>
    <span class="s">"Download an image from a URL"</span><span class="o">,</span>
    <span class="nc">AutoShutdownSignals</span><span class="o">.</span><span class="na">Daemon</span>
<span class="o">);</span>
</code></pre></div></div>

<p>Here‚Äôs what‚Äôs going on in this code:</p>

<ol>
  <li>
    <p>In order to create the SimpleTask, you need provide a functor (TaskExecutor) object that runs
your code in the background.</p>
  </li>
  <li>
    <p>You will need a reference to a TaskManager, so just create one for now.</p>
  </li>
  <li>
    <p>You need to give the task a name - this is good to do, so that when you see status and/or debug
messages, they make more sense. Also, for management/monitoring purposes, this name will be
reported by the TaskManager.</p>
  </li>
  <li>
    <p>You need to give the task a description.</p>
  </li>
  <li>
    <p>The last parameter is one more more AutoShutdownSignals enumeration. This is where you tell the
Task API what ‚Äúsignal‚Äù you want the task to respond to, for selective shutdown (as opposed to
shutting down ALL the tasks that are running). You are free to extend this enumeration and add
your own signals. More on this in future tutorials.</p>
  </li>
</ol>
      <h4 id="the-functor-taskexecutor">
        
        
          The functor (TaskExecutor) <a href="#the-functor-taskexecutor">#</a>
        
        
      </h4>
    

<p>When you click the ‚ÄúStart Task‚Äù button, it simply runs execute() on a SimpleTask that‚Äôs been created
in this application. Here‚Äôs the functor that does the ‚Äòactual work‚Äô.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">TaskExecutorIF</span><span class="o">&lt;</span><span class="nc">ByteBuffer</span><span class="o">&gt;</span> <span class="n">functor</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">TaskExecutorAdapter</span><span class="o">&lt;</span><span class="nc">ByteBuffer</span><span class="o">&gt;()</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="nc">ByteBuffer</span> <span class="nf">doInBackground</span><span class="o">(</span><span class="nc">Future</span><span class="o">&lt;</span><span class="nc">ByteBuffer</span><span class="o">&gt;</span> <span class="n">swingWorker</span><span class="o">,</span>
                                   <span class="nc">SwingUIHookAdapter</span> <span class="n">hook</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">Exception</span>
  <span class="o">{</span>

    <span class="n">_initHook</span><span class="o">(</span><span class="n">hook</span><span class="o">);</span>

    <span class="nc">GetMethod</span> <span class="n">get</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GetMethod</span><span class="o">(</span><span class="n">ttfURI</span><span class="o">.</span><span class="na">getText</span><span class="o">());</span>
    <span class="k">new</span> <span class="nf">HttpClient</span><span class="o">().</span><span class="na">executeMethod</span><span class="o">(</span><span class="n">get</span><span class="o">);</span>

    <span class="nc">ByteBuffer</span> <span class="n">data</span> <span class="o">=</span> <span class="nc">HttpUtils</span><span class="o">.</span><span class="na">getMonitoredResponse</span><span class="o">(</span><span class="n">hook</span><span class="o">,</span> <span class="n">get</span><span class="o">);</span>

    <span class="k">try</span> <span class="o">{</span>
      <span class="n">_img</span> <span class="o">=</span> <span class="nc">ImageUtils</span><span class="o">.</span><span class="na">toCompatibleImage</span><span class="o">(</span><span class="nc">ImageIO</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">data</span><span class="o">.</span><span class="na">getInputStream</span><span class="o">()));</span>
      <span class="n">sout</span><span class="o">(</span><span class="s">"converted downloaded data to image..."</span><span class="o">);</span>
    <span class="o">}</span>
    <span class="k">catch</span> <span class="o">(</span><span class="nc">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">_img</span> <span class="o">=</span> <span class="kc">null</span><span class="o">;</span>
      <span class="n">sout</span><span class="o">(</span><span class="s">"The URI is not an image. Data is downloaded, "</span> <span class="o">+</span>
           <span class="s">"can't display it as an image."</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="k">return</span> <span class="n">data</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span> <span class="kd">public</span> <span class="nc">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">_task</span><span class="o">.</span><span class="na">getName</span><span class="o">();</span>
  <span class="o">}</span>
<span class="o">};</span>
</code></pre></div></div>

<p>Here‚Äôs what‚Äôs going on in the code:</p>

<ol>
  <li>
    <p>The actual work is performed by the GetMethod and HttpClient classes of Apache HttpClient
library. For more information on how HttpClient works, check this out. The HttpUtils class that‚Äôs
part of the Task API takes care of ‚Äòwiring up‚Äô the HttpClient API to provide progress updates.
More details on how this works are provided in a different tutorial.</p>
  </li>
  <li>
    <p>There are 2 parameters passed to the doInBackground(‚Ä¶) method, and the SwingUIHookAdapter is
what you can use to cancel underlying IO operations performed by tasks.</p>
  </li>
</ol>

<p>That‚Äôs pretty much it. This is how simple it is to perform a non-trivial network IO operation in the
background using the Task API.</p>
      <h4 id="the-handler-taskhandler">
        
        
          The handler (TaskHandler) <a href="#the-handler-taskhandler">#</a>
        
        
      </h4>
    

<p>Let‚Äôs take a look at the TaskHandler implementation - this is the callback from the SimpleTask into
your code.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">_task</span><span class="o">.</span><span class="na">setTaskHandler</span><span class="o">(</span><span class="k">new</span>
    <span class="nc">SimpleTaskHandler</span><span class="o">&lt;</span><span class="nc">ByteBuffer</span><span class="o">&gt;()</span> <span class="o">{</span>
      <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">beforeStart</span><span class="o">(</span><span class="nc">AbstractTask</span> <span class="n">task</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">sout</span><span class="o">(</span><span class="s">":: taskHandler - beforeStart"</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">started</span><span class="o">(</span><span class="nc">AbstractTask</span> <span class="n">task</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">sout</span><span class="o">(</span><span class="s">":: taskHandler - started "</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="cm">/**
      * {@link SampleApp#_initHook} adds the task status listener,
      * which is removed here
      */</span>
      <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stopped</span><span class="o">(</span><span class="kt">long</span> <span class="n">time</span><span class="o">,</span> <span class="nc">AbstractTask</span> <span class="n">task</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">sout</span><span class="o">(</span><span class="s">":: taskHandler ["</span> <span class="o">+</span> <span class="n">task</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"]- stopped"</span><span class="o">);</span>
        <span class="n">sout</span><span class="o">(</span><span class="s">":: time = "</span> <span class="o">+</span> <span class="n">time</span> <span class="o">/</span> <span class="mi">1000</span><span class="n">f</span> <span class="o">+</span> <span class="s">"sec"</span><span class="o">);</span>
        <span class="n">task</span><span class="o">.</span><span class="na">getUIHook</span><span class="o">().</span><span class="na">clearAllStatusListeners</span><span class="o">();</span>
      <span class="o">}</span>
      <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">interrupted</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">e</span><span class="o">,</span> <span class="nc">AbstractTask</span> <span class="n">task</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">sout</span><span class="o">(</span><span class="s">":: taskHandler ["</span> <span class="o">+</span>
             <span class="n">task</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span>
             <span class="s">"]- interrupted - "</span> <span class="o">+</span>
             <span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="o">}</span>
      <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">ok</span><span class="o">(</span><span class="nc">ByteBuffer</span> <span class="n">value</span><span class="o">,</span> <span class="kt">long</span> <span class="n">time</span><span class="o">,</span> <span class="nc">AbstractTask</span> <span class="n">task</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">sout</span><span class="o">(</span><span class="s">":: taskHandler ["</span> <span class="o">+</span>
             <span class="n">task</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span>
             <span class="s">"]- ok - size="</span> <span class="o">+</span> <span class="o">(</span><span class="n">value</span> <span class="o">==</span> <span class="kc">null</span>
                                <span class="o">?</span> <span class="s">"null"</span>
                                <span class="o">:</span> <span class="n">value</span><span class="o">.</span><span class="na">toString</span><span class="o">()));</span>
        <span class="k">if</span> <span class="o">(</span><span class="n">_img</span> <span class="o">!=</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
          <span class="n">_displayImgInFrame</span><span class="o">();</span>
        <span class="o">}</span>

      <span class="o">}</span>
      <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">error</span><span class="o">(</span><span class="nc">Throwable</span> <span class="n">e</span><span class="o">,</span> <span class="kt">long</span> <span class="n">time</span><span class="o">,</span> <span class="nc">AbstractTask</span> <span class="n">task</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">sout</span><span class="o">(</span><span class="s">":: taskHandler ["</span> <span class="o">+</span> <span class="n">task</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"]- error - "</span> <span class="o">+</span> <span class="n">e</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
      <span class="o">}</span>
      <span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">cancelled</span><span class="o">(</span><span class="kt">long</span> <span class="n">time</span><span class="o">,</span> <span class="nc">AbstractTask</span> <span class="n">task</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">sout</span><span class="o">(</span><span class="s">" :: taskHandler ["</span> <span class="o">+</span> <span class="n">task</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"]- cancelled"</span><span class="o">);</span>
      <span class="o">}</span>
    <span class="o">}</span>
<span class="o">);</span>
</code></pre></div></div>

<p>The most important methods in the code are:</p>

<ol>
  <li>
    <p><strong>ok()</strong> is called when the task completes execution, without throwing any exceptions, and has a
result, in this case a ByteBuffer. The time the task took to execute is reported, along with a
reference to the task object itself, in case you need to call some methods on it (provided as a
convenience), eg: if you want to display the task‚Äôs name in a debug message.</p>
  </li>
  <li>
    <p><strong>error()</strong> is called when the task completes execution by throwing an exception. Again, the time
it takes for the task to exception out is provided, along with a reference to the task object,
that you can use to get information from for your debug messages.</p>
  </li>
  <li>
    <p><strong>cancelled()</strong> is called when the user cancels the task. Again, the time it takes for the task
to be canceled is provided, along with a reference to the task object itself.</p>
  </li>
</ol>

<p>Here‚Äôs what‚Äôs going on in the rest of the code:</p>

<ol>
  <li>
    <p><strong>beforeStart()</strong> is called before the task is actually executed. This gives you a chance to
perform any prep that you need to do in our code.</p>
  </li>
  <li>
    <p><strong>started()</strong> is called just after the background thread is executed, before your TaskExecutor is
run.</p>
  </li>
  <li>
    <p><strong>stopped()</strong> is called just after the background thread finishes execution (either with a result
or error or cancellation).</p>
  </li>
  <li>
    <p><strong>interrupted()</strong> is called if the background thread is interrupted.</p>
  </li>
</ol>

<p>You can choose to implement as many or as few of the methods in the TaskHandler that you choose. So
you can make your TaskHandler as simple or as complex as you need it to be!</p>
      <h4 id="reporting-task-status">
        
        
          Reporting Task Status <a href="#reporting-task-status">#</a>
        
        
      </h4>
    

<p>Tasks can report their status messages to property change listeners. Here‚Äôs the code to do this:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">_task</span><span class="o">.</span><span class="na">addStatusListener</span><span class="o">(</span><span class="k">new</span> <span class="nc">PropertyChangeListener</span><span class="o">()</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">propertyChange</span><span class="o">(</span><span class="nc">PropertyChangeEvent</span> <span class="n">evt</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">sout</span><span class="o">(</span><span class="s">":: task status change - "</span> <span class="o">+</span>
            <span class="nc">ProgressMonitorUtils</span><span class="o">.</span><span class="na">parseStatusMessageFrom</span><span class="o">(</span><span class="n">evt</span><span class="o">));</span>
    <span class="n">lblProgressStatus</span><span class="o">.</span><span class="na">setText</span><span class="o">(</span>
            <span class="nc">ProgressMonitorUtils</span><span class="o">.</span><span class="na">parseStatusMessageFrom</span><span class="o">(</span><span class="n">evt</span><span class="o">));</span>
  <span class="o">}</span>
<span class="o">});</span>
</code></pre></div></div>
      <h4 id="reporting-progress-status-via-uihook">
        
        
          Reporting Progress Status (via UIHook) <a href="#reporting-progress-status-via-uihook">#</a>
        
        
      </h4>
    

<p>It‚Äôs possible to get progress status updates from Tasks as well. In order to do this, you have to
get a UIHook object from the Task. A reference to this object is automatically passed by the API to
your functor (TaskExecutor) code. However, you can explicitly request one from the task as well, at
any time. The following code ‚Äúwires up‚Äù the Task to provide progress status updates in the functor
(TaskExecutor) itself, by calling the <code class="language-plaintext highlighter-rouge">_initHook()</code> method. Here‚Äôs the code:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="nc">SwingUIHookAdapter</span> <span class="nf">_initHook</span><span class="o">(</span><span class="nc">SwingUIHookAdapter</span> <span class="n">hook</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">hook</span><span class="o">.</span><span class="na">enableRecieveStatusNotification</span><span class="o">(</span><span class="n">checkboxRecvStatus</span><span class="o">.</span><span class="na">isSelected</span><span class="o">());</span>
  <span class="n">hook</span><span class="o">.</span><span class="na">enableSendStatusNotification</span><span class="o">(</span><span class="n">checkboxSendStatus</span><span class="o">.</span><span class="na">isSelected</span><span class="o">());</span>

  <span class="n">hook</span><span class="o">.</span><span class="na">setProgressMessage</span><span class="o">(</span><span class="n">ttfProgressMsg</span><span class="o">.</span><span class="na">getText</span><span class="o">());</span>

  <span class="nc">PropertyChangeListener</span> <span class="n">listener</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">PropertyChangeListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">propertyChange</span><span class="o">(</span><span class="nc">PropertyChangeEvent</span> <span class="n">evt</span><span class="o">)</span> <span class="o">{</span>
      <span class="nc">SwingUIHookAdapter</span><span class="o">.</span><span class="na">PropertyList</span> <span class="n">type</span> <span class="o">=</span>
            <span class="nc">ProgressMonitorUtils</span><span class="o">.</span><span class="na">parseTypeFrom</span><span class="o">(</span><span class="n">evt</span><span class="o">);</span>
      <span class="kt">int</span> <span class="n">progress</span> <span class="o">=</span> <span class="nc">ProgressMonitorUtils</span><span class="o">.</span><span class="na">parsePercentFrom</span><span class="o">(</span><span class="n">evt</span><span class="o">);</span>
      <span class="nc">String</span> <span class="n">msg</span> <span class="o">=</span> <span class="nc">ProgressMonitorUtils</span><span class="o">.</span><span class="na">parseMessageFrom</span><span class="o">(</span><span class="n">evt</span><span class="o">);</span>

      <span class="n">progressBar</span><span class="o">.</span><span class="na">setValue</span><span class="o">(</span><span class="n">progress</span><span class="o">);</span>
      <span class="n">progressBar</span><span class="o">.</span><span class="na">setString</span><span class="o">(</span><span class="n">type</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>

      <span class="n">sout</span><span class="o">(</span><span class="n">msg</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">};</span>

  <span class="n">hook</span><span class="o">.</span><span class="na">addRecieveStatusListener</span><span class="o">(</span><span class="n">listener</span><span class="o">);</span>
  <span class="n">hook</span><span class="o">.</span><span class="na">addSendStatusListener</span><span class="o">(</span><span class="n">listener</span><span class="o">);</span>
  <span class="n">hook</span><span class="o">.</span><span class="na">addUnderlyingIOStreamInterruptedOrClosed</span><span class="o">(</span><span class="k">new</span> <span class="nc">PropertyChangeListener</span><span class="o">()</span> <span class="o">{</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">propertyChange</span><span class="o">(</span><span class="nc">PropertyChangeEvent</span> <span class="n">evt</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">sout</span><span class="o">(</span><span class="n">evt</span><span class="o">.</span><span class="na">getPropertyName</span><span class="o">()</span> <span class="o">+</span> <span class="s">" fired!!!"</span><span class="o">);</span>
    <span class="o">}</span>
  <span class="o">});</span>

  <span class="k">return</span> <span class="n">hook</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Here‚Äôs what‚Äôs happening in this code:</p>

<ol>
  <li>
    <p>The SwingUIHookAdapter object is initialized by telling it to report Send and Recieve updates.
You can select whether to enable these in the SampleApp UI.</p>
  </li>
  <li>
    <p>This UIHook is then initialized with a ‚Äúprogress message‚Äù - this can be set the SampleApp UI as
well.</p>
  </li>
  <li>
    <p>A property change listener is then registered with the UIHook, to get RecieveStatus and
SendStatus updates, along with UnderlyingIOStreamInterruptedOrClosed updates. The latter is to
let you know when the user has interrupted any underlying background IO operation. You can choose
to ignore this if you want and just the issue in your handler (TaskHandler). If you use the
UIHook to cancel the task, then this will get fired.</p>
  </li>
</ol>

<p>There is another thing to note. In the handler (TaskHandler) used in this SampleApp, all listeners
to the task‚Äôs progress messages are removed in the stopped() method of the handler. Here‚Äôs the code
to do so:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/** {@link SampleApp#_initHook} adds the task status listener, which is removed here */</span>
<span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">stopped</span><span class="o">(</span><span class="kt">long</span> <span class="n">time</span><span class="o">,</span> <span class="nc">AbstractTask</span> <span class="n">task</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">sout</span><span class="o">(</span><span class="s">":: taskHandler ["</span> <span class="o">+</span> <span class="n">task</span><span class="o">.</span><span class="na">getName</span><span class="o">()</span> <span class="o">+</span> <span class="s">"]- stopped"</span><span class="o">);</span>
  <span class="n">sout</span><span class="o">(</span><span class="s">":: time = "</span> <span class="o">+</span> <span class="n">time</span> <span class="o">/</span> <span class="mi">1000</span><span class="n">f</span> <span class="o">+</span> <span class="s">"sec"</span><span class="o">);</span>
  <span class="n">task</span><span class="o">.</span><span class="na">getUIHook</span><span class="o">().</span><span class="na">clearAllStatusListeners</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Don‚Äôt forget to do this in your code, it‚Äôs just good practice. It‚Äôs really up to you when you clean
up resources. In this example, the UIHook is initialized in the functor, but you don‚Äôt have to do it
this way. You can add listeners at anytime, and remove them at anytime.</p>
      <h4 id="cancel-task-via-uihook">
        
        
          Cancel Task (via UIHook) <a href="#cancel-task-via-uihook">#</a>
        
        
      </h4>
    

<p>The SwingUIHookAdapter used to get progress status updates can also be used to cancel any underlying
IO operations. Here again, the Task API gives you more than one way to do something. If you simply
call cancel() on the task, it will do the same thing. However, if you want to explicitly interrupt
IO that a task is executing, then you can use the UIHook to stop this IO. If you call this method
then the UnderlyingIOStreamInterruptedOrClosed property is fired. Why would you want to use this
over just canceling the task? I will explain in depth in the next tutorial.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kt">void</span> <span class="nf">canceUIHookAction</span><span class="o">()</span> <span class="o">{</span>
  <span class="n">_task</span><span class="o">.</span><span class="na">getUIHook</span><span class="o">().</span><span class="na">cancel</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div></div>
      <h2 id="more-details">
        
        
          More details <a href="#more-details">#</a>
        
        
      </h2>
    

<p>This quick start guide shows you some highlights of the API, to get a much more detailed analysis of
the API and what‚Äôs going on in the SampleApp, read the next tutorial -
<a href="https://developerlifecom.wordpress.com/2008/04/08/task-api-2-of-5-task-api-in-depth/">Task API (2 of 3) - Task API in-depth</a>.</p>
      <h2 id="misc-notes">
        
        
          Misc notes <a href="#misc-notes">#</a>
        
        
      </h2>
    

<p>The Task API is written in Java 6, and it uses the SwingWorker implementation from Java6. If you
aren‚Äôt using Java6, then you will get exceptions.</p>

<p>Additionally, the Apache HttpClient library doesn‚Äôt make it easy to monitor the progress of the GET
request itself (when key/value pairs are sent to the servlet, in the first part of the HTTP GET
protocol). It is possible to monitor the response, but not the request. It‚Äôs possible on the other
hand to monitor both the request and response of a POST operation. So if you need the request to be
monitored, use POST (if this is possible). More details on doing this are going to be provided in
another tutorial.</p>
      <h2 id="download---i-want-the-code-now">
        
        
          Download - I want the code now! <a href="#download---i-want-the-code-now">#</a>
        
        
      </h2>
    

<p>You can download the source code distribution <a href="/assets/taskapi.zip">here</a>.
Included are sources, libraries that are needed, and javadocs. The sample applications are included
in the source as well. Please read the javadocs - I have copious amounts of documentation about the
lifecycle stages of Tasks in there, along with all the other classes in the Task API. The best place
to see what‚Äôs going on is in the javadocs. I took the time to write them for your benefit, as well
as mine, so please use them üòÉ .</p>

<p>After you download the zip file, you will find all the compiled JARs that you will need in the
/taskapi/dist/ folder. All the source code is in the /taskapi/src/ folder. The javadocs are in the
/taskapi/javadoc/ folder.</p>

        <!--
    Display all the categories for this page
    More info:
    - Tutorial - http://tinyurl.com/yc6fq6zx
    - Liquid language reference - http://tinyurl.com/y8s4qpwo
-->
<div class="categories-block">
    
    
    <span class="category">
            <a href="/category/CC">
                #cc</a>
        </span>
    
</div>

        
<blockquote>

  üëÄ Watch Rust ü¶Ä live coding videos on our <a
  href="https://www.youtube.com/@developerlifecom">YouTube Channel</a>.

  <br/>
  <br/>

  <!-- video on rust polymorphism (no playlist) -->
  <iframe
      src="https://www.youtube.com/embed/kYTgGtJjSro?si=XmW-_CAvCfB5e269"
      title="YouTube video player" frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen
      >
  </iframe>

  <br/>
  <br/>

  üì¶ Install our useful Rust command line apps using <code>cargo install r3bl-cmdr</code>
  (they are from the <a href="https://github.com/r3bl-org/r3bl-open-core">r3bl-open-core</a>
  project):
  <ul>
    <li>üê±<code>giti</code>: run interactive git commands with confidence in your terminal</li>
    <li>ü¶ú<code>edi</code>: edit Markdown with style in your terminal</li>
  </ul>

  <p>
  <kbd>giti in action</kbd>
  <video width="100%" controls>
    <source src="https://github.com/nazmulidris/developerlife.com/assets/2966499/262f59d1-a95c-4af3-accf-c3d6cac6e586" type="video/mp4"/>
  </video>
  </p>

  <p>
  <kbd>edi in action</kbd>
  <video width="100%" controls>
    <source src="https://github.com/nazmulidris/developerlife.com/assets/2966499/f2c4b07d-b5a2-4f41-af7a-06d1b6660c41" type="video/mp4"/>
  </video>
  </p>

  </blockquote>

        <!--
    Display related posts (by category)
    More info:
    - Tutorial - http://tinyurl.com/j5tevq7
    - Liquid language reference - http://tinyurl.com/y9ru5msq
-->
<div class="related-post-block">

    <h3>Related Posts</h3>

    <!-- Get all the related posts into the string `postsString`-->
    
    
    

    <!--
        At this point `postsString` string might look like:
        Post 3|Post 1|Post 3|Post 2|Post 1|Post 3|Post 2|
    -->

    <!-- Remove all the dupes from the `postsString` string, and split it into an array -->
    

    <ul>
        
            
                
                <li>
                    <a class="post-list" href="/2022/03/12/rust-redux/">
                        Write a Redux library in Rust
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2022/03/12/rust-tokio/">
                        Write code using async/await in Rust
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2019/12/02/project-loom-experiment/">
                        Experimenting w/ Fibers in Project Loom preview
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/07/09/android-o-n-and-below-component-lifecycles-and-background-tasks/">
                        Deep dive into Android Services
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2010/10/12/android-event-dispatch-thread-or-main-thread/">
                        Android Event Dispatch Thread or Main Thread
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/06/04/how-to-build-a-service-enabled-android-app-part-33-multithreading/">
                        Android - How to build a service-enabled Android app - Part 3/3 Multithreading
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/05/27/task-api-3-of-5-monitoring-http-post-operations/">
                        Task API (3 of 3) - Monitoring HTTP POST operations
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/04/08/task-api-2-of-5-task-api-in-depth/">
                        Task API (2 of 3) - Task API in-depth
                    </a>
                </li>
            
        
            
        
            
                
                <li>
                    <a class="post-list" href="/2007/11/09/swingworker-details-canceling-background-tasks-in-flight/">
                        SwingWorker details - canceling background tasks in flight
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2007/01/08/creating-multi-threaded-swing-apps-that-consume-web-services/">
                        Creating multi-threaded Swing apps that consume web services
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2006/06/09/introduction-to-java-50-javautilconcurrent-api/">
                        Introduction to Java 5 java.util.concurrent API
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2000/09/20/advanced-threads/">
                        Advanced Threads
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2000/09/20/introduction-to-threads/">
                        Introduction to Threads
                    </a>
                </li>
            
        
    </ul>

</div>

        <a class="u-url" href="/2008/04/05/task-api-quick-start-guide/" hidden></a>
    </div></article>
</div>
      </main><div>
  <section class="sidebar">
    <!-- video on intro to testing (with playlist) -->
    <!-- <iframe
      src="https://www.youtube.com/embed/videoseries?si=7gmhXY5DVYJG7OdU&amp;list=PLofhE49PEwmwLR_4Noa0dFOSPmSpIg_l8"
      title="YouTube video player"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen
    >
    </iframe> -->

    <!-- rust async readline and spinner & playlist -->
    <!-- <iframe
      src="https://www.youtube.com/embed/videoseries?si=i37Ei9nCfvslOoaI&amp;list=PLofhE49PEwmwelPkhfiqdFQ9IXnmGdnSE"
      title="YouTube video player"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen
    >
    </iframe> -->

    <!-- effective async rust & playlist -->
    <h2 class="star-us-github-heading">
      Subscribe to our
      <a href="https://www.youtube.com/@developerlifecom">YT Channel</a
      ><span class="heading-emoji"> ü¶Ä</span>
    </h2>

    <iframe
    src="https://www.youtube.com/embed/qvIt8MF-pCM?si=S40pbhnvVDAohj-6"
      title="YouTube video player"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen>
    </iframe>

    <hr />

    <h2 class="star-us-github-heading">
      <a href="https://r3bl.com#services">Need help with code?</a>
      <span class="heading-emoji"> üíº</span>
    </h2>

    <hr />

    <h2 class="star-us-github-heading">
      Use our crates & apps<span class="heading-emoji"> üì¶</span>
    </h2>

    <ul class="sidebar-ul">
      <li class="app-container">
        <a href="https://github.com/r3bl-org/r3bl-open-core/tree/main/cmdr" target="_blank">
          <img class="star-icon-img" src="/assets/r3bl-apps.svg" />
          <div class="sidebar-list-item">
            <p class="p-tag">INSTALL & USE OUR APPS (giti, edi)</p>
            <h3 class="sidebar-h3"><code>r3bl-cmdr</code></h3>
          </div>
        </a>
      </li>
      <li class="app-container">
        <a href="https://github.com/r3bl-org/r3bl-open-core/tree/main/tui" target="_blank">
          <img class="star-icon-img" src="/assets/crate.png" />
          <div class="sidebar-list-item">
            <p class="p-tag">R3BL TUI LIB</p>
            <h3 class="sidebar-h3"><code>r3bl_tui</code></h3>
          </div>
        </a>
      </li>
      <li class="app-container">
        <a href="https://chromewebstore.google.com/detail/r3bl-shortlink/ffhfkgcfbjoadmhdmdcmigopbfkddial?hl=en-US&gl=US" target="_blank">
          <img class="star-icon-img" src="/assets/r3bl-shortlink.svg" />
          <div class="sidebar-list-item">
            <p class="p-tag">SHORTLINK browser extension</p>
            <h3 class="sidebar-h3"><code>shortlink</code></h3>
          </div>
        </a>
      </li>
      <!-- <li class="app-container">
        <a href="https://github.com/r3bl-org/r3bl-open-core/tree/main/tuify" target="_blank">
          <img class="star-icon-img" src="/assets/crate.png" />
          <div class="sidebar-list-item">
            <p class="p-tag">R3BL TUIFY LIB</p>
            <h3 class="sidebar-h3"><code>r3bl_tuify</code></h3>
          </div>
        </a>
      </li>
      <li class="app-container">
        <a
          href="https://github.com/r3bl-org/r3bl-open-core/tree/main/terminal_async"
          target="_blank"
        >
          <img class="star-icon-img" src="/assets/crate.png" />
          <div class="sidebar-list-item">
            <p class="p-tag">R3BL TERMINAL ASYNC LIB</p>
            <h3 class="sidebar-h3"><code>r3bl_terminal_async</code></h3>
          </div>
        </a>
      </li> -->
    </ul>

  </section>
</div>
</div><footer class="site-footer h-card">

    <div class="wrapper">

        <div class="footer-col-wrapper">

            <div class="footer-col"><!-- <p>
    developerlife.com site was started in Nov 1998 with coverage for
    topics related to Java, XML, and web and desktop technologies.
    Today it covers Kotlin, TypeScript, Node.js, React, Android, JDK,
    Web, Cloud technologies, User Experience Engineering (UXE)
    and design topics. ¬© Nazmul Idris 1996-2025. All rights reserved.
</p> -->
<div>
  <p class="footer-p">
    developerlife.com site was started in Nov 1998 by <a
    href="https://developerlife.com/about-me/">Nazmul Idris</a>, with coverage for topics
    related to Java, XML, and web and desktop technologies. Today it covers Rust, TUI,
    CLI, Kotlin, TypeScript, Node.js, React, Android, JDK, Web, Cloud technologies, User
    Experience Engineering (UXE) and design topics. ¬© Nazmul Idris 1996-2025. All rights
    reserved.
  </p>

  <!--
  <div class="footer-container">

    <kbd>
      <a class="footer-elem-2" href="https://r3bl.com#services" target="_blank">Need help with code?</a>
    </kbd>

    <kbd>
      <a class="footer-elem-1" href="/subscribe.html" target="_blank"
        >Newsletter</a
      >
    </kbd>

  </div>
  -->
</div>
</div>

        </div>

    </div>

</footer>
<script>
//open external links in a new window
function external_new_window() {
    for(var c = document.getElementsByTagName("a"), a = 0;a < c.length;a++) {
    var b = c[a];
    b.getAttribute("href") && b.hostname !== location.hostname && (b.target = "_blank")
    }
}
//open PDF links in a new window
function pdf_new_window ()
{
    if (!document.getElementsByTagName) return false;
    var links = document.getElementsByTagName("a");
    for (var eleLink=0; eleLink < links.length; eleLink ++) {
    if ((links[eleLink].href.indexOf('.pdf') !== -1)||(links[eleLink].href.indexOf('.doc') !== -1)||(links[eleLink].href.indexOf('.docx') !== -1)) {
        links[eleLink].onclick =
        function() {
            window.open(this.href);
            return false;
        }
    }
    }
} 
pdf_new_window()
external_new_window();
</script></body>
</html>
