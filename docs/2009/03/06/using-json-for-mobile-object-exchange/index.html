<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Using JSON for mobile object exchange | developerlife.com</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Using JSON for mobile object exchange" />
<meta name="author" content="Nazmul Idris" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Iâ€™ve been working with various object encoding schemes to get information transferred over the network between services and mobile apps running on Android and BlackBerry. On Android, I figured I would try using Java object serialization, and that works some of the time, and not for anything complex. I wish the object serialization and deserialization mechanism in GWT would be ported over to all these mobile environments, but I digress. This tutorial outlines the use of JSON for this purpose." />
<meta property="og:description" content="Iâ€™ve been working with various object encoding schemes to get information transferred over the network between services and mobile apps running on Android and BlackBerry. On Android, I figured I would try using Java object serialization, and that works some of the time, and not for anything complex. I wish the object serialization and deserialization mechanism in GWT would be ported over to all these mobile environments, but I digress. This tutorial outlines the use of JSON for this purpose." />
<link rel="canonical" href="http://developerlife.com/2009/03/06/using-json-for-mobile-object-exchange/" />
<meta property="og:url" content="http://developerlife.com/2009/03/06/using-json-for-mobile-object-exchange/" />
<meta property="og:site_name" content="developerlife.com" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2009-03-06T13:47:02-06:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Using JSON for mobile object exchange" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Nazmul Idris"},"dateModified":"2009-03-06T13:47:02-06:00","datePublished":"2009-03-06T13:47:02-06:00","description":"Iâ€™ve been working with various object encoding schemes to get information transferred over the network between services and mobile apps running on Android and BlackBerry. On Android, I figured I would try using Java object serialization, and that works some of the time, and not for anything complex. I wish the object serialization and deserialization mechanism in GWT would be ported over to all these mobile environments, but I digress. This tutorial outlines the use of JSON for this purpose.","headline":"Using JSON for mobile object exchange","mainEntityOfPage":{"@type":"WebPage","@id":"http://developerlife.com/2009/03/06/using-json-for-mobile-object-exchange/"},"url":"http://developerlife.com/2009/03/06/using-json-for-mobile-object-exchange/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css" />

  <!-- Add favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

  <!-- Add font awesome -->
  <link
    rel="stylesheet"
    href="https://use.fontawesome.com/releases/v5.2.0/css/all.css"
    integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ"
    crossorigin="anonymous"
  />

  <!-- Add Google fonts-->
  <link
    href="https://fonts.googleapis.com/css?family=Spline+Sans|Work+Sans|Fira+Mono|Fira+Sans|Google+Sans|Lexend+Deca&display=swap"
    rel="stylesheet"
  /><link type="application/atom+xml" rel="alternate" href="http://developerlife.com/feed.xml" title="developerlife.com" /><!-- https://developers.google.com/analytics/devguides/collection/gtagjs -->
<script async
        src="https://www.googletagmanager.com/gtag/js?id=G-NQY9ECC58H"></script>
<script>
  window.dataLayer = window.dataLayer || []

  function gtag() {
    window.dataLayer.push(arguments)
  }

  gtag("js", new Date())
  gtag("config", "G-NQY9ECC58H")
</script>
<!-- https://us14.admin.mailchimp.com/account/connected-sites/site-detail/ -->

<script id="mcjs">
  !(function (c, h, i, m, p) {
    ;(m = c.createElement(h)),
      (p = c.getElementsByTagName(h)[0]),
      (m.async = 1),
      (m.src = i),
      p.parentNode.insertBefore(m, p)
  })(
    document,
    "script",
    "https://chimpstatic.com/mcjs-connected/js/users/c2470ddfa863eb8ace707651b/2bb3bcad193ef862398700457.js"
  )
</script>
</head>
<body><!-- https://github.com/mermaid-js/mermaid/blob/develop/docs/n00b-gettingStarted.md -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

<script>
  // https://mermaid-js.github.io/mermaid/#/theming
  mermaid.initialize({
    startOnLoad: true,
    theme: "dark",
    themeVariables: {
      fontFamily: "Fira Code",
      fontSize: "0.95rem",
      darkMode: true,
      primaryColor: "#2f9ece",
      mainBkg: "#303439",
    },
  })
</script>
<header class="site-header" role="banner">

    <div class="wrapper header-wrapper"><div class="logo-container">
        <div class="logo-image">
          <a class="site-title"
             rel="author"
             href="/">
              <!-- This is the logo image placeholder. -->
                <picture>
                  <source srcset="/assets/dl-logo-icon-dark.svg" media="(max-width: 600px)"/>
                  <img  src="/assets/dl-logo-icon-and-text-dark.svg" />
                </picture>
          </a>
        </div>
      </div><nav class="site-nav">
            <input type="checkbox" id="nav-trigger" class="nav-trigger"/>
            <label for="nav-trigger">
          <span class="menu-icon">
              <svg class="svg-icon">
              <use xlink:href="/assets/minima-social-icons.svg#menu">
              </use>
            </svg>
          </span>
            </label>

            <div class="trigger"><!--
    Iterate over all the pages in the site, where page_cursor holds the current
    page for each pass of the for loop.
    Note that page is the currently loaded page itself.
--><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Android/"> Android </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/CC/"> Concurrency </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/CLI/"> CLI </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/CS/"> CS </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/DB/"> Database </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/DI/"> DI </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/FE/"> Frontend </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Hardware/"> Hardware </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/IJ/"> IntelliJ </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/KT/"> Kotlin </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Linux/"> Linux </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/MP/"> MP </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Misc/"> Misc </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Node/"> Node </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Productivity/"> Productivity </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/RN/"> React-Native </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/React/"> React </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Rust/"> Rust </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Server/"> Server </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/State/"> State-Management </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Stories/"> Stories </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/TDD/"> Testing </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/TS/"> TypeScript </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/TUI/"> TUI </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Web/"> Web </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/about-me/"> Nazmul Idris </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/about-site/"> About Us </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/authors/"> Authors </a></div>
        </nav></div>
</header>

<!-- Debug to show the value of page.title and page.category variables -->
<!--<pre>page_cursor.exclude = nil</pre>-->
<!--<pre>page.exclude = nil</pre>-->
<!--<pre>page.title = &quot;Using JSON for mobile object exchange&quot;</pre>-->
<!--<pre>page.category = nil</pre>-->
<!--<pre>page.title (json) = Using JSON for mobile object exchange</pre>-->
<!--<pre>page.category (json) = </pre>-->
<div class="page-and-sidebar-wrapper">
      <main class="page-content" aria-label="Content">
        <div class="wrapper"><article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Using JSON for mobile object exchange</h1>

    <!-- Create all the variables needed for this page (and all the includes) -->
    

    <div class="post-meta">
        <p>
            <!-- Date -->Mar 6, 2009

            <!--Author-->
            âˆ™ <a href="/about-me">Nazmul Idris</a>

            <!-- One line social blurb --><ul class="contact-list">
    <li class="p-name">Hi, I'm
            <a href="/about-me">Nazmul</a>,
            an ex-Googler, <a href="https://github.com/r3bl-org/r3bl-open-core/tree/main/tui" target="_blank">r3bl_tui maintainer</a>, SWE, entrepreneur, designer, leader,
            TaiChi-er, racer, storyteller.
            <!-- This is font awesome icon -->
            I <i class="fas fa-heart"></i>
            leadership, authenticity, empowerment, lifelong learning,
            <i class="fas fa-code"></i>,
            <i class="fas fa-terminal"></i>, &
            <i class="fas fa-coffee"></i>,
            ðŸ˜ƒ.</li>
</ul>
</p>
    </div><div class="social-media-container">
  <!-- <iframe
    src="https://github.com/sponsors/nazmulidris/button"
    title="Sponsor nazmulidris"
    height="35"
    width="116"
    style="border: 0; padding-right: 6px"
  ></iframe> -->

  <a href="/subscribe.html" target="_blank"
    ><kbd>Subscribe for updates</kbd></a
  ><p class="social-media-item">
    <a
      href="https://www.linkedin.com/in/nazmulidris"
      target="_blank"
    >
      <svg class="svg-icon">
        <use xlink:href="/assets/minima-social-icons.svg#linkedin"></use>
      </svg>
    </a>
  </p><p class="social-media-item">
    <a href="https://www.youtube.com/channel/UCMcsxfCwzwDevc3NRqFgfEg" target="_blank">
      <svg class="svg-icon">
        <use xlink:href="/assets/minima-social-icons.svg#youtube"></use>
      </svg>
    </a>
  </p><p class="social-media-item">
    <a href="https://www.github.com/nazmulidris" target="_blank">
      <svg class="svg-icon">
        <use xlink:href="/assets/minima-social-icons.svg#github"></use>
      </svg>
    </a>
  </p><p class="social-media-item">
    <a href="/feed.xml" target="_blank">
      <svg class="svg-icon">
        <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
      </svg>
    </a>
  </p></div>
</header>
<div class="post-content e-content" itemprop="articleBody">
        <blockquote>
  ðŸ‘€ Watch Rust ðŸ¦€ live coding videos on our
  <a href="https://www.youtube.com/@developerlifecom">YouTube Channel</a>.

  <br />

  <!-- video on rust polymorphism (no playlist) -->
  <iframe
      src="https://www.youtube.com/embed/kYTgGtJjSro?si=XmW-_CAvCfB5e269"
      title="YouTube video player" frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen
      >
  </iframe>

  <!-- video on intro to testing (with playlist) -->
  <!-- <iframe
    src="https://www.youtube.com/embed/videoseries?si=7gmhXY5DVYJG7OdU&amp;list=PLofhE49PEwmwLR_4Noa0dFOSPmSpIg_l8"
    title="YouTube video player"
    frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
    referrerpolicy="strict-origin-when-cross-origin"
    allowfullscreen
  >
  </iframe> -->

</blockquote>

        <!-- If a page has a hero-image defined in it, then show it here -->


        <!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

<ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#what-is-json">What is JSON?</a></li>
  <li><a href="#source-code-example">Source code example</a></li>
  <li><a href="#my-json-code-generator">My JSON Code Generator</a></li>
  <li><a href="#json-api-for-javame-and-se">JSON API for JavaME and SE</a></li>
</ul>

<!-- END doctoc generated TOC please keep comment here to allow auto update -->
      <h2 id="introduction">
        
        
          Introduction <a href="#introduction">#</a>
        
        
      </h2>
    

<p>Iâ€™ve been working with various object encoding schemes to get information transferred over the
network between services and mobile apps running on Android and BlackBerry. On Android, I figured I
would try using Java object serialization, and that works some of the time, and not for anything
complex. I wish the object serialization and deserialization mechanism in GWT would be ported over
to all these mobile environments, but I digress.</p>

<p>So I evaluated the following strategies:</p>

<ol>
  <li>
    <p>I tried using binary formats, these are too complicated and the overhead of writing
marshalling/unmarshalling code is too high. Also this code has to be portable across a variety of
platforms, and so it gets complicated. For me, it has to work on BlackBerry and Android, and
BlackBerry is clearly the lesser platform, only supporting JavaME, while Android has pseudo Java5
support with generics.</p>
  </li>
  <li>
    <p>I tried using Google Protocol Buffers. While this sounded like the perfect solution at first, it
isnâ€™t. It relies on the use of generics and so that rules it out as an option for JavaME,
although itâ€™s a good option to have for Android and even desktop environments, and other service
to service interactions. But this is one more thing to learn, and it wonâ€™t even work for
BlackBerry. So that ruled it out.</p>
  </li>
  <li>
    <p>I looked at XML serialization. There is plenty of tooling around this option. They have XMLRPC
servers and clients (even for JavaME) so that makes it a little easier to deal with. But all
transport mechanism aside, the marshalling and unmarshalling code still has to be generated
painfully. Although the use of Betwixt &amp; Digester or XML Beans might make it easier. Again, more
APIs to use and learn and all thatâ€¦ so that ruled it out.</p>
  </li>
</ol>

<p>So what did I end up choosing? None of the above ðŸ˜ƒ. I picked this one: <a href="http://json.org/">JSON</a>.
Yes, good old JavaScript Object Serialization ðŸ˜ƒ. Itâ€™s simple. Itâ€™s lightweight. The marshalling and
unmarshalling has to be done by hand, but itâ€™s relatively simple (everything is a map, and you can
have lists of values). Any binary data you want to transfer has to be encoded to Base64, so thatâ€™s
cool. Itâ€™s really simple, nothing new to learn. And they have APIs available for everything
(platform, language, whatever). The only thing to keep in mind is that your
marshalling/unmarshalling code has to be available in the codebase of your services as well as
mobile apps, and any other apps that you use this data in. Using HTTP makes it so that you donâ€™t
really have to include the transport mechanism code, since HTTP/S libs are available on just about
every platform.</p>
      <h2 id="what-is-json">
        
        
          What is JSON? <a href="#what-is-json">#</a>
        
        
      </h2>
    

<p>Think of JSON as a hashtable. For a key there is a value. The value can be an object. JSON supports
some Java objects right out of the box like Vector, String, Integer, Boolean, and Arrays of Objects.
If you want to transfer objects, then you have to convert them to bytes, and then Base64 encode
these bytes to strings. Then you have to reverse this process to get the Object when you
deserialize. The main class for transferring a Hashtable is JSONObject.</p>

<p>You can also pass arrays, which can have objects of any type in them using JSONArray. This class is
great when you donâ€™t have keys for the objects you are trying to pass over the wire. Things like
method params are really easy to encode using this scheme. You can also put JSONArray as a value for
a key in a JSONObject object.</p>

<p>Here are some diagrams that depict this:</p>

<p><img src="/assets/json-1.gif" alt="" /></p>

<p><img src="/assets/json-2.gif" alt="" /></p>

<p>There are a couple of things to keep in mind:</p>

<ol>
  <li>
    <p>When passing null as a value, be sure to pass <code class="language-plaintext highlighter-rouge">JSONObject.NULL</code> instead. This just avoids
<code class="language-plaintext highlighter-rouge">JSONExceptions</code> being raised all over the place, and it makes it so that null values are
actually passed in a <code class="language-plaintext highlighter-rouge">JSONObject</code> (which by default will not include a key if the value is null).
<code class="language-plaintext highlighter-rouge">JSONObject.NULL.equals(null)</code> is <code class="language-plaintext highlighter-rouge">true</code>, so you can test for your value being null in this way.</p>
  </li>
  <li>
    <p>When passing objects, be sure that whatâ€™s contained in them can be serialized. Alternatively,
provide serialization routines to Base64 encoded string for bytes that are not provided by
default.</p>
  </li>
  <li>
    <p>When using JSON, you can use the underlying <code class="language-plaintext highlighter-rouge">Hashtable</code> has the foundation data structure of your
object model, if it fits. Otherwise, just design your object model in a way that is natural for
it, and just write serialization method to convert it to a <code class="language-plaintext highlighter-rouge">Hashtable</code>/<code class="language-plaintext highlighter-rouge">JSONObject</code>/<code class="language-plaintext highlighter-rouge">JSONArray</code>.
My code generator is meant as a starting point to do thisâ€¦ you can modify itâ€™s output by hand
to meet your needs.</p>
  </li>
</ol>
      <h2 id="source-code-example">
        
        
          Source code example <a href="#source-code-example">#</a>
        
        
      </h2>
    

<p>This example shows using <code class="language-plaintext highlighter-rouge">JSONArray</code>, <code class="language-plaintext highlighter-rouge">JSONObject</code>, and <code class="language-plaintext highlighter-rouge">Vectors</code>. Thereâ€™s also a visualization of
the state of the <code class="language-plaintext highlighter-rouge">JSONObject</code> at the end of the code.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">JSONDemo</span> <span class="o">{</span>

    <span class="c1">// main method</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">JSONException</span> <span class="o">{</span>
        <span class="nc">JSONArray</span> <span class="n">list1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JSONArray</span><span class="o">();</span>
        <span class="nc">Vector</span> <span class="n">v</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Vector</span><span class="o">();</span>
        <span class="n">v</span><span class="o">.</span><span class="na">addElement</span><span class="o">(</span><span class="s">"1"</span><span class="o">);</span>
        <span class="n">v</span><span class="o">.</span><span class="na">addElement</span><span class="o">(</span><span class="s">"2"</span><span class="o">);</span>
        <span class="n">v</span><span class="o">.</span><span class="na">addElement</span><span class="o">(</span><span class="s">"3"</span><span class="o">);</span>
        <span class="n">list1</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="n">v</span><span class="o">);</span>

        <span class="nc">Vector</span> <span class="n">v1</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Vector</span><span class="o">();</span>
        <span class="n">v1</span><span class="o">.</span><span class="na">addElement</span><span class="o">(</span><span class="s">"A"</span><span class="o">);</span>
        <span class="n">v1</span><span class="o">.</span><span class="na">addElement</span><span class="o">(</span><span class="s">"B"</span><span class="o">);</span>
        <span class="n">v1</span><span class="o">.</span><span class="na">addElement</span><span class="o">(</span><span class="s">"C"</span><span class="o">);</span>
        <span class="nc">JSONArray</span> <span class="n">list2</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JSONArray</span><span class="o">(</span><span class="n">v1</span><span class="o">);</span>

        <span class="nc">JSONObject</span> <span class="n">jObj</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JSONObject</span><span class="o">();</span>
        <span class="n">jObj</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"key"</span><span class="o">,</span> <span class="s">"value"</span><span class="o">);</span>
        <span class="n">jObj</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"list1"</span><span class="o">,</span> <span class="n">list1</span><span class="o">);</span>
        <span class="n">jObj</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">"list2"</span><span class="o">,</span> <span class="n">list2</span><span class="o">);</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"JObject: "</span> <span class="o">+</span> <span class="n">jObj</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="mi">5</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p><img src="/assets/json-3.png" alt="" /></p>
      <h2 id="my-json-code-generator">
        
        
          My JSON Code Generator <a href="#my-json-code-generator">#</a>
        
        
      </h2>
    

<p>Here are some code examples to get you started:
<a href="http://code.google.com/p/json-simple/wiki/EncodingExamples">http://code.google.com/p/json-simple/wiki/EncodingExamples</a></p>

<p>To automate the process, Iâ€™ve actually created a class that generates JSON code for you ðŸ˜ƒ . Itâ€™s a
very useful code generator that is a good starting point for you to use in your projects. If you
improve on it, and are willing to share the improvements, please email them to me and I will provide
it on developerlife.com. Just run this class and provide the field names you want it to generate
code for as command line arguments. The code is output to the console and automatically copied to
the clipboard so you can paste it into your IDE using Ctrl + V.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">rpc.json</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">rpc.json.me.*</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.awt.*</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.awt.datatransfer.*</span><span class="o">;</span>

<span class="cm">/**
 * JSONCodegen is a simple code generator that takes care of creating
 * getter/setter/ser/deser code for you. You just provide the fields
 * you want, and the code is generated &amp; copied to the clipboard.
 *
 * &lt;p&gt;The getter/setter code deal with "null" objects by using
 * {@link JSONObject#NULL} instead.
 *
 * @author Nazmul Idris
 * @version 1.0
 * @since Feb 11, 2009, 8:55:51 AM
 */</span>
<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JSONCodegen</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="nc">DefaultPackage</span> <span class="o">=</span> <span class="s">"datamodels"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="nc">DefaultClass</span> <span class="o">=</span> <span class="s">"MyDataModel"</span><span class="o">;</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="nc">String</span> <span class="nc">DefaultType</span> <span class="o">=</span> <span class="s">"Object"</span><span class="o">;</span>

    <span class="cm">/**
     * provide the properties/fields that you want your json
     * object to have, separated by spaces.
     */</span>
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="nc">StringBuffer</span> <span class="n">buf</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StringBuffer</span><span class="o">();</span>

        <span class="c1">// package and import</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"package "</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultPackage</span><span class="o">);</span>
        <span class="n">_endLine</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"import rpc.json.me.*"</span><span class="o">);</span>
        <span class="n">_endLine</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>

        <span class="c1">// class</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"/** code generated by JSONCodegen */\n"</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"public class "</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultClass</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">" {\n"</span><span class="o">);</span>

        <span class="n">_data</span><span class="o">(</span><span class="n">args</span><span class="o">,</span> <span class="n">buf</span><span class="o">);</span>

        <span class="n">_constructors</span><span class="o">(</span><span class="n">args</span><span class="o">,</span> <span class="n">buf</span><span class="o">);</span>

        <span class="n">_gettersetter</span><span class="o">(</span><span class="n">args</span><span class="o">,</span> <span class="n">buf</span><span class="o">);</span>

        <span class="n">_serdeser</span><span class="o">(</span><span class="n">args</span><span class="o">,</span> <span class="n">buf</span><span class="o">);</span>

        <span class="n">_listutils</span><span class="o">(</span><span class="n">args</span><span class="o">,</span> <span class="n">buf</span><span class="o">);</span>

        <span class="n">_tostr</span><span class="o">(</span><span class="n">args</span><span class="o">,</span> <span class="n">buf</span><span class="o">);</span>

        <span class="c1">// end class</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"} //end class "</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultClass</span><span class="o">);</span>

        <span class="c1">// dump to console &amp; copy to clipboard</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>
        <span class="n">_saveToClipboard</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">_tostr</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">,</span> <span class="nc">StringBuffer</span> <span class="n">buf</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"\n/* toString */\n"</span><span class="o">);</span>

        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span>
                <span class="s">"public String toString() {\n"</span>
                        <span class="o">+</span> <span class="s">"  try {\n"</span>
                        <span class="o">+</span> <span class="s">"    return "</span>
                <span class="o">+</span> <span class="s">"BBUtils.compactPrintJSONObject(toJSON()).toString();\n"</span>
                        <span class="o">+</span> <span class="s">"  }\n"</span>
                        <span class="o">+</span> <span class="s">"  catch (JSONException e) {\n"</span>
                        <span class="o">+</span> <span class="s">"    return \""</span>
                        <span class="o">+</span> <span class="nc">DefaultClass</span>
                        <span class="o">+</span> <span class="s">" - can not get toString():\" + e.toString();\n"</span>
                        <span class="o">+</span> <span class="s">"  }\n"</span>
                        <span class="o">+</span> <span class="s">"}"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">_listutils</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">,</span> <span class="nc">StringBuffer</span> <span class="n">buf</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"\n/* list utils */\n"</span><span class="o">);</span>

        <span class="c1">// toarray</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"public static JSONArray toJSONArray("</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultClass</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"[] ray) {\n"</span><span class="o">);</span>

        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"JSONArray jray = new JSONArray();\n"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"for (int i = 0; i &lt; ray.length; i++) "</span>
                        <span class="o">+</span> <span class="s">"jray.put(ray[i]);\n"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"return jray;\n"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"}\n"</span><span class="o">);</span>

        <span class="c1">// fromarray</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"public static "</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultClass</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"[] fromJSONArray(JSONArray jray) "</span>
                   <span class="o">+</span> <span class="s">"throws JSONException {\n"</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"int size = jray.length();\n"</span><span class="o">);</span>

        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultClass</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"[] ray = new "</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultClass</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"[size];\n"</span><span class="o">);</span>

        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"for (int i = 0; i &lt; size; i++) ray[i] = ("</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultClass</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">") jray.get(i);\n"</span><span class="o">);</span>

        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"return ray;\n}\n"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">_serdeser</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">,</span> <span class="nc">StringBuffer</span> <span class="n">buf</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"\n/* ser, deser */\n"</span><span class="o">);</span>

        <span class="c1">// tojson</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"public JSONObject toJSON() throws JSONException {\n"</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"JSONObject retval = new JSONObject()"</span><span class="o">);</span>
        <span class="n">_endLine</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">args</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"retval.put("</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">_quotesAround</span><span class="o">(</span><span class="n">arg</span><span class="o">))</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">", "</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">arg</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">")"</span><span class="o">);</span>
            <span class="n">_endLine</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"return retval"</span><span class="o">);</span>
        <span class="n">_endLine</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"}\n"</span><span class="o">);</span>

        <span class="c1">// fromjson</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"public static "</span><span class="o">)</span>
                <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultClass</span><span class="o">)</span>
                <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">" fromJSON(JSONObject json) "</span>
                        <span class="o">+</span> <span class="s">"throws JSONException {\n"</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultClass</span><span class="o">)</span>
                <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">" retval = new "</span><span class="o">)</span>
                <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultClass</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">"()"</span><span class="o">);</span>
        <span class="n">_endLine</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">args</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"retval.set_"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">arg</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"(json.get("</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">_quotesAround</span><span class="o">(</span><span class="n">arg</span><span class="o">))</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"))"</span><span class="o">);</span>
            <span class="n">_endLine</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"return retval"</span><span class="o">);</span>
        <span class="n">_endLine</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"}\n"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">_gettersetter</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">,</span> <span class="nc">StringBuffer</span> <span class="n">buf</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"\n/* getter, setter */\n"</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">args</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"/** @param val if this is null, "</span>
                       <span class="o">+</span> <span class="s">"JSONObject.NULL will be inserted.*/\n"</span><span class="o">);</span>
            <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"public void "</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"set_"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">arg</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"("</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultType</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">" val){\n"</span><span class="o">);</span>
            <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"if (val == null) val = JSONObject.NULL;\n"</span><span class="o">);</span>
            <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">arg</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">" = val;\n}\n"</span><span class="o">);</span>
        <span class="o">}</span>

        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">args</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span>
                    <span class="s">"/** @return JSONObject.NULL will be returned "</span>
                    <span class="o">+</span> <span class="s">"if null was inserted to begin with.*/\n"</span><span class="o">);</span>
            <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"public "</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultType</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">" get_"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">arg</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"(){"</span><span class="o">);</span>
            <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"return "</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">arg</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">";}\n"</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">_constructors</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">,</span> <span class="nc">StringBuffer</span> <span class="n">buf</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"\n/* constructors */\n"</span><span class="o">);</span>

        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"public "</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultClass</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">"(){}\n"</span><span class="o">);</span>

        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"public "</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultClass</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">"("</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">args</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="kt">boolean</span> <span class="n">isLastElement</span> <span class="o">=</span> <span class="n">i</span> <span class="o">==</span> <span class="o">(</span><span class="n">args</span><span class="o">.</span><span class="na">length</span> <span class="o">-</span> <span class="mi">1</span><span class="o">);</span>
            <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultType</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">" "</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">arg</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">"_"</span><span class="o">);</span>
            <span class="k">if</span> <span class="o">(!</span><span class="n">isLastElement</span><span class="o">)</span> <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">", "</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"){\n"</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">args</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"set_"</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="n">arg</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">"("</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">arg</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">"_)"</span><span class="o">);</span>
            <span class="n">_endLine</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>
        <span class="o">}</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"}\n"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">_data</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">,</span> <span class="nc">StringBuffer</span> <span class="n">buf</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"\n/* data */\n"</span><span class="o">);</span>
        <span class="k">for</span> <span class="o">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">args</span><span class="o">.</span><span class="na">length</span><span class="o">;</span> <span class="n">i</span><span class="o">++)</span> <span class="o">{</span>
            <span class="nc">String</span> <span class="n">arg</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="n">i</span><span class="o">];</span>
            <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="nc">DefaultType</span><span class="o">)</span>
                    <span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">" "</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="n">arg</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">" = JSONObject.NULL"</span><span class="o">);</span>
            <span class="n">_endLine</span><span class="o">(</span><span class="n">buf</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">_endLine</span><span class="o">(</span><span class="nc">StringBuffer</span> <span class="n">buf</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">buf</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">";\n"</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="nc">String</span> <span class="nf">_quotesAround</span><span class="o">(</span><span class="nc">String</span> <span class="n">msg</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"\""</span> <span class="o">+</span> <span class="n">msg</span> <span class="o">+</span> <span class="s">"\""</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">_saveToClipboard</span><span class="o">(</span><span class="nc">StringBuffer</span> <span class="n">buf</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">StringSelection</span> <span class="n">stringSelection</span> <span class="o">=</span>
                <span class="k">new</span> <span class="nf">StringSelection</span><span class="o">(</span><span class="n">buf</span><span class="o">.</span><span class="na">toString</span><span class="o">());</span>
        <span class="nc">Clipboard</span> <span class="n">clipboard</span> <span class="o">=</span>
                <span class="nc">Toolkit</span><span class="o">.</span><span class="na">getDefaultToolkit</span><span class="o">().</span><span class="na">getSystemClipboard</span><span class="o">();</span>
        <span class="n">clipboard</span><span class="o">.</span><span class="na">setContents</span><span class="o">(</span>
                <span class="n">stringSelection</span><span class="o">,</span>
                <span class="k">new</span> <span class="nf">ClipboardOwner</span><span class="o">()</span> <span class="o">{</span>
                    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">lostOwnership</span><span class="o">(</span><span class="nc">Clipboard</span> <span class="n">clipboard</span><span class="o">,</span>
                                              <span class="nc">Transferable</span> <span class="n">contents</span><span class="o">)</span> <span class="o">{}</span>
                <span class="o">});</span>
    <span class="o">}</span>
<span class="o">}</span> <span class="c1">// end class JSONCodegen</span>
</code></pre></div></div>
      <h2 id="json-api-for-javame-and-se">
        
        
          JSON API for JavaME and SE <a href="#json-api-for-javame-and-se">#</a>
        
        
      </h2>
    

<p>Iâ€™ve taken some open source libraries and combined them into one package that I use in all my
ScreamingToaster software. Iâ€™ve packaged a Base64 codec, as well as a JSON parser and generator,
along with some utility classes to make it really easy to use. Let me know if you have any issues
with the library, and if you can see areas of improvement. You can <a href="/assets/json.zip">download it here</a>.</p>

<p>Here are some important classes:</p>

<ol>
  <li>
    <p><code class="language-plaintext highlighter-rouge">rpc.ByteBuffer.java</code> - this class allows you to perform base64 encoding/decoding pretty
easilyâ€¦ check out the static methods for the class, and itâ€™s use becomes apparent.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">rpc.json.JSONCodegen.java</code> - this is the code generator thatâ€™s listed above.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">rpc.json.me.JSONObject.java</code> - this is the main <code class="language-plaintext highlighter-rouge">JSONObject</code> class.</p>
  </li>
  <li>
    <p><code class="language-plaintext highlighter-rouge">rpc.json.me.JSONArray.java</code> - this is the main <code class="language-plaintext highlighter-rouge">JSONArray</code> class.</p>
  </li>
</ol>

        <!--
    Display all the categories for this page
    More info:
    - Tutorial - http://tinyurl.com/yc6fq6zx
    - Liquid language reference - http://tinyurl.com/y8s4qpwo
-->
<div class="categories-block">
    
    
    <span class="category">
            <a href="/category/Android">
                #android</a>
        </span>
    
    <span class="category">
            <a href="/category/Server">
                #server</a>
        </span>
    
</div>

        
<blockquote>

ðŸ“¦ Install our useful Rust command line apps using <code>cargo install r3bl-cmdr</code>
(they are from the <a href="https://github.com/r3bl-org/r3bl-open-core">r3bl-open-core</a>
project):
<ul>
  <li>ðŸ±<code>giti</code>: run interactive git commands with confidence in your terminal</li>
  <li>ðŸ¦œ<code>edi</code>: edit Markdown with style in your terminal</li>
</ul>

<p>
<kbd>giti in action</kbd>
<video width="100%" controls>
  <source src="https://github.com/nazmulidris/developerlife.com/assets/2966499/262f59d1-a95c-4af3-accf-c3d6cac6e586" type="video/mp4"/>
</video>
</p>

<p>
<kbd>edi in action</kbd>
<video width="100%" controls>
  <source src="https://github.com/nazmulidris/developerlife.com/assets/2966499/f2c4b07d-b5a2-4f41-af7a-06d1b6660c41" type="video/mp4"/>
</video>
</p>

</blockquote>

        <!--
    Display related posts (by category)
    More info:
    - Tutorial - http://tinyurl.com/j5tevq7
    - Liquid language reference - http://tinyurl.com/y9ru5msq
-->
<div class="related-post-block">

    <h3>Related Posts</h3>

    <!-- Get all the related posts into the string `postsString`-->
    
    
    

    <!--
        At this point `postsString` string might look like:
        Post 3|Post 1|Post 3|Post 2|Post 1|Post 3|Post 2|
    -->

    <!-- Remove all the dupes from the `postsString` string, and split it into an array -->
    

    <ul>
        
            
                
                <li>
                    <a class="post-list" href="/2020/07/11/annotation-processing-kotlin-android/">
                        Annotation Processing in Kotlin and Android
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2019/05/11/kotlin-vs-java/">
                        Java vs Kotlin for Android development
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2018/10/21/dagger2-in-depth/">
                        In-depth exploration of Dagger 2
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2018/07/21/designing-for-multiple-screen-densities-on-android/">
                        Designing for multiple screen densities on Android
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/12/07/introduction-to-android-architecture-components/">
                        Introduction to Android Architecture Components
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/12/02/android-downloadable-fonts/">
                        Android Downloadable Fonts
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/07/29/getting-started-with-mediaplayer-on-android/">
                        Getting started with MediaPlayer on Android
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/07/09/android-o-n-and-below-component-lifecycles-and-background-tasks/">
                        Deep dive into Android Services
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/04/26/flexbox-layouts-and-lists-with-react-native/">
                        Flexbox layouts and lists with React Native
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/04/14/navigation-and-styling-with-react-native/">
                        Navigation and Styling with React Native
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/03/31/getting-started-with-react-native/">
                        Getting started with React Native
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/01/27/native-android-redux-and-firebase/">
                        Android, Redux, Firebase Auth &amp; Database, and Material Design
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2010/10/20/gps/">
                        Android Location Providers (gps, network, passive)
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2010/10/12/android-event-dispatch-thread-or-main-thread/">
                        Android Event Dispatch Thread or Main Thread
                    </a>
                </li>
            
        
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/08/05/android-animation-framework/">
                        Android Animation Framework Tutorial
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/08/04/android-listview/">
                        Android ListView and custom adapter Tutorial
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/08/04/android-linearlayout/">
                        Android LinearLayout Tutorial
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/07/31/android-ui-themes/">
                        Android UI Themes Tutorial
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/07/29/android-tablelayout/">
                        Android TableLayout Tutorial
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/07/16/option-and-context-menu/">
                        Android Option and Context menu Tutorial
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/07/16/android-xml-view-inflation/">
                        Android XML View inflation Tutorial
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/07/14/android-app-lifecycle-activity-intent-and-service-draft/">
                        Android Activity and sub-Activity Tutorial
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/06/04/how-to-build-a-service-enabled-android-app-part-33-multithreading/">
                        Android - How to build a service-enabled Android app - Part 3/3 Multithreading
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/06/04/how-to-build-a-service-enabled-android-app-part-13-ui/">
                        Android - How to build a service-enabled Android app - Part 1/3 UI
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/06/04/how-to-build-a-service-enabled-android-app-part-23-networking/">
                        Android - How to build a service-enabled Android App - Part 2/3 Networking
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2024/04/28/rust-polymorphism-dyn-impl-trait-objects-for-testing-and-extensibiity/">
                        Rust Polymorphism, dyn, impl, using existing traits, trait objects for testing and extensibility
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2024/04/21/build-async-interactive-cli-apps-in-rust/">
                        Build interactive and non blocking CLI apps with ease in Rust using r3bl_terminal_async
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2024/01/13/write-simple-netcat-in-rust/">
                        Write a simple netcat client and server in Rust
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2024/01/13/write-simple-chat-server-in-rust/">
                        Write a simple TCP chat server in Rust
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2021/11/25/ink-v3-advanced-ui-components/">
                        Reference handbook for using Ink v3.2.0 components (w/ React, Node.js and TypeScript)
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2021/11/05/ink-v3-advanced/">
                        Advanced guide to Ink v3.2.0 (w/ React, Node.js and TypeScript)
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2021/11/04/introduction-to-ink-v3/">
                        Introduction to Ink v3.2.0 (w/ React, Node.js and TypeScript)
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2021/07/02/nodejs-typescript-handbook/">
                        Node.js (v16.3.0) Handbook using TypeScript (v4.3.4)
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2019/12/02/project-loom-experiment/">
                        Experimenting w/ Fibers in Project Loom preview
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2011/04/13/creating-asynchronous-servlets-with-tomcat-7-servlet-3-0-api/">
                        Creating asynchronous servlets with Tomcat 7 (Servlet 3.0 API)
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/04/21/geocoding-tutorial-accessing-google-static-maps-from-java/">
                        Geocoding tutorial - Accessing Google Static Maps from Java
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2007/11/27/what-is-xml-an-introduction/">
                        What is XML? An introduction
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2000/09/20/advanced-threads/">
                        Advanced Threads
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/1998/12/01/xml-and-java-tutorial-part-1/">
                        XML and Java Tutorial, Part 1
                    </a>
                </li>
            
        
    </ul>

</div>

        <a class="u-url" href="/2009/03/06/using-json-for-mobile-object-exchange/" hidden></a>
    </div></article>
</div>
      </main><div>
  <section class="sidebar">
    <h2 class="star-us-github-heading">
      Subscribe to our Rust live coding
      <a href="https://www.youtube.com/@developerlifecom">YouTube Channel</a
      ><span class="heading-emoji"> ðŸ¦€</span>
    </h2>

    <!-- video on intro to testing (with playlist) -->
    <!-- <iframe
      src="https://www.youtube.com/embed/videoseries?si=7gmhXY5DVYJG7OdU&amp;list=PLofhE49PEwmwLR_4Noa0dFOSPmSpIg_l8"
      title="YouTube video player"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen
    >
    </iframe> -->

    <!-- rust async readline and spinner & playlist -->
    <iframe
      src="https://www.youtube.com/embed/videoseries?si=i37Ei9nCfvslOoaI&amp;list=PLofhE49PEwmwelPkhfiqdFQ9IXnmGdnSE"
      title="YouTube video player"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen
    >
    </iframe>

    <br />
    <br />

    <h2 class="star-us-github-heading">
      Use our extensions, apps, binary and library crates<span class="heading-emoji"> ðŸ“¦</span>
    </h2>

    <ul class="sidebar-ul">
      <li class="app-container">
        <a href="https://github.com/r3bl-org/r3bl-open-core/tree/main/cmdr" target="_blank">
          <img class="star-icon-img" src="/assets/r3bl-apps.svg" />
          <div class="sidebar-list-item">
            <p class="p-tag">INSTALL & USE OUR APPS (giti, edi)</p>
            <h3 class="sidebar-h3"><code>r3bl-cmdr</code></h3>
          </div>
        </a>
      </li>
      <li class="app-container">
        <a href="https://github.com/r3bl-org/shortlink" target="_blank">
          <img class="star-icon-img" src="/assets/r3bl-shortlink.svg" />
          <div class="sidebar-list-item">
            <p class="p-tag">SHORTLINK browser extension</p>
            <h3 class="sidebar-h3"><code>shortlink</code></h3>
          </div>
        </a>
      </li>
      <li class="app-container">
        <a href="https://github.com/r3bl-org/r3bl-open-core/tree/main/tui" target="_blank">
          <img class="star-icon-img" src="/assets/crate.png" />
          <div class="sidebar-list-item">
            <p class="p-tag">R3BL TUI LIB</p>
            <h3 class="sidebar-h3"><code>r3bl_tui</code></h3>
          </div>
        </a>
      </li>
      <li class="app-container">
        <a href="https://github.com/r3bl-org/r3bl-open-core/tree/main/tuify" target="_blank">
          <img class="star-icon-img" src="/assets/crate.png" />
          <div class="sidebar-list-item">
            <p class="p-tag">R3BL TUIFY LIB</p>
            <h3 class="sidebar-h3"><code>r3bl_tuify</code></h3>
          </div>
        </a>
      </li>
      <li class="app-container">
        <a
          href="https://github.com/r3bl-org/r3bl-open-core/tree/main/terminal_async"
          target="_blank"
        >
          <img class="star-icon-img" src="/assets/crate.png" />
          <div class="sidebar-list-item">
            <p class="p-tag">R3BL TERMINAL ASYNC LIB</p>
            <h3 class="sidebar-h3"><code>r3bl_terminal_async</code></h3>
          </div>
        </a>
      </li>
    </ul>

    <br />

    <h2 class="star-us-github-heading">
      Join our <a href="https://discord.gg/PhuF4qFpcA">Discord</a>
      <span class="heading-emoji"> ðŸ’¬</span>
    </h2>
  </section>
</div>
</div><footer class="site-footer h-card">

    <div class="wrapper">

        <div class="footer-col-wrapper">

            <div class="footer-col"><!-- <p>
    developerlife.com site was started in Nov 1998 with coverage for
    topics related to Java, XML, and web and desktop technologies.
    Today it covers Kotlin, TypeScript, Node.js, React, Android, JDK,
    Web, Cloud technologies, User Experience Engineering (UXE)
    and design topics. Â© Nazmul Idris 2022. All rights reserved.
</p> -->
<div>
  <p class="footer-p">
    developerlife.com site was started in Nov 1998 by <a href="https://developerlife.com/about-me/">Nazmul Idris</a>, with coverage for topics related to Java, XML,
    and web and desktop technologies. Today it covers Rust, TUI, CLI, Kotlin, TypeScript, Node.js, React, Android,
    JDK, Web, Cloud technologies, User Experience Engineering (UXE) and design topics. Â© Nazmul
    Idris 2022. All rights reserved.
  </p>
  <div class="footer-container">
    <!-- element 1 -->
    <kbd>
      <a class="footer-elem-1" href="/subscribe.html" target="_blank"
        >Subscribe for updates</a
      >
    </kbd>

    <!-- element 2 -->
    <kbd>
      <a class="footer-elem-2" href="https://r3bl.com" target="_blank">Sponsored by R3BL</a>
    </kbd>
  </div>
</div>
</div>

        </div>

    </div>

</footer>
<script>
//open external links in a new window
function external_new_window() {
    for(var c = document.getElementsByTagName("a"), a = 0;a < c.length;a++) {
    var b = c[a];
    b.getAttribute("href") && b.hostname !== location.hostname && (b.target = "_blank")
    }
}
//open PDF links in a new window
function pdf_new_window ()
{
    if (!document.getElementsByTagName) return false;
    var links = document.getElementsByTagName("a");
    for (var eleLink=0; eleLink < links.length; eleLink ++) {
    if ((links[eleLink].href.indexOf('.pdf') !== -1)||(links[eleLink].href.indexOf('.doc') !== -1)||(links[eleLink].href.indexOf('.docx') !== -1)) {
        links[eleLink].onclick =
        function() {
            window.open(this.href);
            return false;
        }
    }
    }
} 
pdf_new_window()
external_new_window();
</script></body>
</html>
