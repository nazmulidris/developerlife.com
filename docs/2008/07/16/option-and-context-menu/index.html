<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Android Option and Context menu Tutorial | developerlife.com</title>
<meta name="generator" content="Jekyll v4.3.3" />
<meta property="og:title" content="Android Option and Context menu Tutorial" />
<meta name="author" content="Nazmul Idris" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This tutorial will show you how to create options menu (hooks into the MENU button) and context menu (press and hold a component)." />
<meta property="og:description" content="This tutorial will show you how to create options menu (hooks into the MENU button) and context menu (press and hold a component)." />
<link rel="canonical" href="http://developerlife.com/2008/07/16/option-and-context-menu/" />
<meta property="og:url" content="http://developerlife.com/2008/07/16/option-and-context-menu/" />
<meta property="og:site_name" content="developerlife.com" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2008-07-16T17:13:08-05:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Android Option and Context menu Tutorial" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Nazmul Idris"},"dateModified":"2008-07-16T17:13:08-05:00","datePublished":"2008-07-16T17:13:08-05:00","description":"This tutorial will show you how to create options menu (hooks into the MENU button) and context menu (press and hold a component).","headline":"Android Option and Context menu Tutorial","mainEntityOfPage":{"@type":"WebPage","@id":"http://developerlife.com/2008/07/16/option-and-context-menu/"},"url":"http://developerlife.com/2008/07/16/option-and-context-menu/"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/main.css" />

  <!-- Add favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

  <!-- Add fontawesome (only for bio.html page) -->
  <link
    rel="stylesheet"
    href="https://use.fontawesome.com/releases/v5.2.0/css/all.css"
    integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ"
    crossorigin="anonymous"
  /><link type="application/atom+xml" rel="alternate" href="http://developerlife.com/feed.xml" title="developerlife.com" /><!-- https://developers.google.com/analytics/devguides/collection/gtagjs -->
<script async
        src="https://www.googletagmanager.com/gtag/js?id=G-NQY9ECC58H"></script>
<script>
  window.dataLayer = window.dataLayer || []

  function gtag() {
    window.dataLayer.push(arguments)
  }

  gtag("js", new Date())
  gtag("config", "G-NQY9ECC58H")
</script>
<!-- https://us14.admin.mailchimp.com/account/connected-sites/site-detail/ -->

<script id="mcjs">
  !(function (c, h, i, m, p) {
    ;(m = c.createElement(h)),
      (p = c.getElementsByTagName(h)[0]),
      (m.async = 1),
      (m.src = i),
      p.parentNode.insertBefore(m, p)
  })(
    document,
    "script",
    "https://chimpstatic.com/mcjs-connected/js/users/c2470ddfa863eb8ace707651b/2bb3bcad193ef862398700457.js"
  )
</script>
</head>
<body><!-- https://github.com/mermaid-js/mermaid/blob/develop/docs/n00b-gettingStarted.md -->
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>

<script>
  // https://mermaid-js.github.io/mermaid/#/theming
  mermaid.initialize({
    startOnLoad: true,
    theme: "dark",
    themeVariables: {
      fontFamily: "Fira Code",
      fontSize: "0.95rem",
      darkMode: true,
      primaryColor: "#2f9ece",
      mainBkg: "#303439",
    },
  })
</script>
<header class="site-header" role="banner">

    <div class="wrapper header-wrapper"><div class="logo-container">
        <div class="logo-image">
          <a class="site-title"
             rel="author"
             href="/">
              <!-- This is the logo image placeholder. -->
                <picture>
                  <source srcset="/assets/dl-logo-icon-dark.svg" media="(max-width: 600px)"/>
                  <img  src="/assets/dl-logo-icon-and-text-dark.svg" />
                </picture>
          </a>
        </div>
      </div><nav class="site-nav">
            <input type="checkbox" id="nav-trigger" class="nav-trigger"/>
            <label for="nav-trigger">
          <span class="menu-icon">
              <svg class="svg-icon">
              <use xlink:href="/assets/minima-social-icons.svg#menu">
              </use>
            </svg>
          </span>
            </label>

            <div class="trigger"><!--
    Iterate over all the pages in the site, where page_cursor holds the current
    page for each pass of the for loop.
    Note that page is the currently loaded page itself.
--><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Android/"> Android </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/CC/"> Concurrency </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/CLI/"> CLI </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/CS/"> CS </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/DB/"> Database </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/DI/"> DI </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/FE/"> Frontend </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Hardware/"> Hardware </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/IJ/"> IntelliJ </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/KT/"> Kotlin </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Linux/"> Linux </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/MP/"> MP </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Misc/"> Misc </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Node/"> Node </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Productivity/"> Productivity </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/RN/"> React-Native </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/React/"> React </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Rust/"> Rust </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Server/"> Server </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/State/"> State-Management </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Stories/"> Stories </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/TDD/"> Testing </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/TS/"> TypeScript </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/TUI/"> TUI </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/category/Web/"> Web </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/about-me/"> Nazmul Idris </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/about-site/"> About Us </a><!-- This item is not selected -->
        <!-- Don't list excluded pages --><a class="page-link" href="/authors/"> Authors </a></div>
        </nav></div>
</header>

<!-- Debug to show the value of page.title and page.category variables -->
<!--<pre>page_cursor.exclude = nil</pre>-->
<!--<pre>page.exclude = nil</pre>-->
<!--<pre>page.title = &quot;Android Option and Context menu Tutorial&quot;</pre>-->
<!--<pre>page.category = nil</pre>-->
<!--<pre>page.title (json) = Android Option and Context menu Tutorial</pre>-->
<!--<pre>page.category (json) = </pre>-->
<div class="page-and-sidebar-wrapper">
      <main class="page-content" aria-label="Content">
        <div class="wrapper"><article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting"><header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Android Option and Context menu Tutorial</h1>

    <!-- Create all the variables needed for this page (and all the includes) -->
    

    <div class="post-meta">
        <p>
            <!-- Date -->Jul 16, 2008

            <!--Author-->
            ∙ <a href="/about-me">Nazmul Idris</a>

            <!-- One line social blurb --><ul class="contact-list">
    <li class="p-name">Hi, I'm
            <a href="/about-me">Nazmul</a>,
            an ex-Googler, <a href="https://github.com/r3bl-org/r3bl-open-core/tree/main/tui" target="_blank">r3bl_tui maintainer</a>, SWE, entrepreneur, designer, leader,
            TaiChi-er, racer, storyteller.
            <!-- This is fontawesome icon -->
            I <i class="fas fa-heart"></i>
            leadership, authenticity, empowerment, lifelong learning,
            <i class="fas fa-code"></i>,
            <i class="fas fa-terminal"></i>, &
            <i class="fas fa-coffee"></i>,
            😃.</li>
</ul>
</p>
    </div><div class="social-media-container">
  <!-- <iframe
    src="https://github.com/sponsors/nazmulidris/button"
    title="Sponsor nazmulidris"
    height="35"
    width="116"
    style="border: 0; padding-right: 6px"
  ></iframe> -->

  <a href="/subscribe.html" target="_blank"
    ><kbd>Subscribe for updates</kbd></a
  ><p class="social-media-item">
    <a
      href="https://www.linkedin.com/in/nazmulidris"
      target="_blank"
    >
      <svg class="svg-icon">
        <use xlink:href="/assets/minima-social-icons.svg#linkedin"></use>
      </svg>
    </a>
  </p><p class="social-media-item">
    <a href="https://www.youtube.com/channel/UCMcsxfCwzwDevc3NRqFgfEg" target="_blank">
      <svg class="svg-icon">
        <use xlink:href="/assets/minima-social-icons.svg#youtube"></use>
      </svg>
    </a>
  </p><p class="social-media-item">
    <a href="https://www.github.com/nazmulidris" target="_blank">
      <svg class="svg-icon">
        <use xlink:href="/assets/minima-social-icons.svg#github"></use>
      </svg>
    </a>
  </p><p class="social-media-item">
    <a href="/feed.xml" target="_blank">
      <svg class="svg-icon">
        <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
      </svg>
    </a>
  </p></div>
</header>
<div class="post-content e-content" itemprop="articleBody">
        <!-- If a page has a hero-image defined in it, then show it here -->


        <!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

<ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#menu-item-creation-code">Menu item creation code</a></li>
  <li><a href="#option-menu---menu-button">Option Menu - MENU button</a></li>
  <li><a href="#context-menu---press-and-hold">Context Menu - Press and hold</a></li>
  <li><a href="#responding-to-menu-selection">Responding to menu selection</a></li>
  <li><a href="#using-images-in-menus">Using images in menus</a></li>
</ul>

<!-- END doctoc generated TOC please keep comment here to allow auto update -->
      <h2 id="introduction">
        
        
          Introduction <a href="#introduction">#</a>
        
        
      </h2>
    

<p>This tutorial will show you how to create options menu (hooks into the MENU button) and context menu
(press and hold a component). You can add pictures and text to menu items that get added to both
context and options menus. What’s the difference between these 2 types of menus?</p>

<ol>
  <li>
    <p>Think of the option menu as a global menu, that’s activated when the MENU button is pressed in an
Activity.</p>
  </li>
  <li>
    <p>Think of the context menu as a right-click-menu on a component; just press and hold (with the
enter key on the emulator D-Pad) and this context menu will get activated.</p>
  </li>
</ol>

<p>In the example I will build in this tutorial, I will create a set of Menu.Items that are the same
for Option and Context menu. The code to create these menu items and respond to user selection of
these items is the same in my example.</p>
      <h2 id="menu-item-creation-code">
        
        
          Menu item creation code <a href="#menu-item-creation-code">#</a>
        
        
      </h2>
    

<p>Here’s the code to create some menu items, given a Menu. Whether you are using context or option
menu items, this code is the same:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// menu item constants</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="nc">Menu1</span> <span class="o">=</span> <span class="nc">Menu</span><span class="o">.</span><span class="na">FIRST</span> <span class="o">+</span> <span class="mi">1</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="nc">Menu2</span> <span class="o">=</span> <span class="nc">Menu</span><span class="o">.</span><span class="na">FIRST</span> <span class="o">+</span> <span class="mi">2</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="nc">Menu3</span> <span class="o">=</span> <span class="nc">Menu</span><span class="o">.</span><span class="na">FIRST</span> <span class="o">+</span> <span class="mi">3</span><span class="o">;</span>
<span class="kd">public</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">int</span> <span class="nc">Menu4</span> <span class="o">=</span> <span class="nc">Menu</span><span class="o">.</span><span class="na">FIRST</span> <span class="o">+</span> <span class="mi">4</span><span class="o">;</span>

<span class="cm">/** create the menu items */</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">populateMenu</span><span class="o">(</span><span class="nc">Menu</span> <span class="n">menu</span><span class="o">)</span> <span class="o">{</span>

  <span class="c1">// enable keyb shortcuts, qwerty mode = true means</span>
  <span class="c1">// only show keyb shortcuts (not numeric) and vice versa</span>
  <span class="c1">// these only show up in context menu, not options menu</span>
  <span class="n">menu</span><span class="o">.</span><span class="na">setQwertyMode</span><span class="o">(</span><span class="kc">true</span><span class="o">);</span>

  <span class="nc">Menu</span><span class="o">.</span><span class="na">Item</span> <span class="n">item1</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="nc">Menu1</span><span class="o">,</span> <span class="s">"MenuOption1"</span><span class="o">);</span>
  <span class="o">{</span>
    <span class="n">item1</span><span class="o">.</span><span class="na">setAlphabeticShortcut</span><span class="o">(</span><span class="sc">'a'</span><span class="o">);</span>
    <span class="n">item1</span><span class="o">.</span><span class="na">setIcon</span><span class="o">(</span><span class="nc">AppUtils</span><span class="o">.</span><span class="na">resizeImage</span><span class="o">(</span>
            <span class="k">this</span><span class="o">,</span> <span class="no">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">tagfavorite1</span><span class="o">,</span> <span class="mi">32</span><span class="o">,</span> <span class="mi">32</span><span class="o">));</span>
  <span class="o">}</span>

  <span class="nc">Menu</span><span class="o">.</span><span class="na">Item</span> <span class="n">item2</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="nc">Menu2</span><span class="o">,</span> <span class="s">"MenuOption2"</span><span class="o">);</span>
  <span class="o">{</span>
    <span class="n">item2</span><span class="o">.</span><span class="na">setAlphabeticShortcut</span><span class="o">(</span><span class="sc">'b'</span><span class="o">);</span>
    <span class="n">item2</span><span class="o">.</span><span class="na">setIcon</span><span class="o">(</span><span class="nc">AppUtils</span><span class="o">.</span><span class="na">resizeImage</span><span class="o">(</span>
            <span class="k">this</span><span class="o">,</span> <span class="no">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">tagfavorite2</span><span class="o">,</span> <span class="mi">32</span><span class="o">,</span> <span class="mi">32</span><span class="o">));</span>
  <span class="o">}</span>

  <span class="nc">Menu</span><span class="o">.</span><span class="na">Item</span> <span class="n">item3</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="nc">Menu3</span><span class="o">,</span> <span class="s">"MenuOption3"</span><span class="o">);</span>
  <span class="o">{</span>
    <span class="n">item3</span><span class="o">.</span><span class="na">setNumericShortcut</span><span class="o">(</span><span class="sc">'1'</span><span class="o">);</span>
    <span class="n">item3</span><span class="o">.</span><span class="na">setIcon</span><span class="o">(</span><span class="nc">AppUtils</span><span class="o">.</span><span class="na">resizeImage</span><span class="o">(</span>
            <span class="k">this</span><span class="o">,</span> <span class="no">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">tagfavorite3</span><span class="o">,</span> <span class="mi">32</span><span class="o">,</span> <span class="mi">32</span><span class="o">));</span>
  <span class="o">}</span>

  <span class="nc">Menu</span><span class="o">.</span><span class="na">Item</span> <span class="n">item4</span> <span class="o">=</span> <span class="n">menu</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="nc">Menu4</span><span class="o">,</span> <span class="s">"MenuOption4"</span><span class="o">);</span>
  <span class="o">{</span>
    <span class="n">item4</span><span class="o">.</span><span class="na">setNumericShortcut</span><span class="o">(</span><span class="sc">'2'</span><span class="o">);</span>
    <span class="n">item4</span><span class="o">.</span><span class="na">setIcon</span><span class="o">(</span><span class="nc">AppUtils</span><span class="o">.</span><span class="na">resizeImage</span><span class="o">(</span>
            <span class="k">this</span><span class="o">,</span> <span class="no">R</span><span class="o">.</span><span class="na">drawable</span><span class="o">.</span><span class="na">tagnote3</span><span class="o">,</span> <span class="mi">32</span><span class="o">,</span> <span class="mi">32</span><span class="o">));</span>
  <span class="o">}</span>

<span class="o">}</span>
</code></pre></div></div>

<p>Here are some notes on the code:</p>

<ol>
  <li>
    <p>The menu is created by Android and passed to you; you have to add whatever menu items you want to
this object, you don’t actually create the Menu.</p>
  </li>
  <li>
    <p>You can have keyboard accelerators/shortcuts bound to menu items; you have to pick whether you
want alpha or numeric accelerators, you can’t have both. The code to set alpha accelerators is
Menu.setQwertyMode(true). Just set it to false, if you only want numeric accelerators.</p>
  </li>
  <li>
    <p>You can pass an image and/or some text to create a menu item. By default, if you use a preloaded
Drawable image, then it will be shown in it’s full size. In the code above, I’m actually resizing
the image so that it will be 32x32 pixels in size. The code for can be found at the end of this
tutorial.</p>
  </li>
  <li>
    <p>You must have a correlation Id bound to each menu item. This Id will be used by the handler (that
you will bind to in the next sections) that will respond to these menu items being selected. The
correlation Ids I’m using are int constants called: Menu1, Menu2, Menu3, and Menu4. Instead of
picking random integers, it’s a good idea to add an offset value to Menu.FIRST so that these
correlation Ids don’t conflict with default Android menu items.</p>
  </li>
  <li>
    <p>There is something called a group id that you can assign a menu item as well - these are only
relevant if you want to group together certain menu items. In this example, I’ve used “0” as the
group Id. <br />
Once the menu has been populated with menu items, they have to be added to an Activity. This is where
the code for hooking up the menu items to a Context menu differs from hooking them up to an Option
menu.</p>
  </li>
</ol>
      <h2 id="option-menu---menu-button">
        
        
          Option Menu - MENU button <a href="#option-menu---menu-button">#</a>
        
        
      </h2>
    

<p>The first step in hooking up your menus to an Activity is to create them (which is already shown
above). The 2nd step is to hook into the Activity’s menu creation methods to call your code, which
creates these menu items:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Menu button - option menu</span>

<span class="cm">/** hook into menu button for activity */</span>
<span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onCreateOptionsMenu</span><span class="o">(</span><span class="nc">Menu</span> <span class="n">menu</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">populateMenu</span><span class="o">(</span><span class="n">menu</span><span class="o">);</span>
  <span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">onCreateOptionsMenu</span><span class="o">(</span><span class="n">menu</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/** when menu button option selected */</span>
<span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onOptionsItemSelected</span><span class="o">(</span><span class="nc">Menu</span><span class="o">.</span><span class="na">Item</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="nf">applyMenuChoice</span><span class="o">(</span><span class="n">item</span><span class="o">)</span> <span class="o">||</span> <span class="kd">super</span><span class="o">.</span><span class="na">onOptionsItemSelected</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Here are some notes on this code:</p>

<ol>
  <li>
    <p>The menu is created by Android and passed to you; you have to add whatever menu items you want to
this object, you don’t actually create the Menu. This allows Android to populate the Menu with
system defined menu items (in case you call super.onCreateOptionsMenu(menu) for the Option menu).</p>
  </li>
  <li>
    <p>If you add more than 5 menu items to the given menu, then the 6th option won’t not be displayed
in the grid (like they are in the screenshot above). A “More” button will be shown and when you
select this a list view will be shown with all your menu items. In the grid view, the
accelerators are not shown. The grid view only takes up the bottom portion of the
Activity/screen. The list view takes up the full screen and shows the keyboard accelerators.</p>
  </li>
  <li>
    <p>The code to respond to menu item selection is shown below (this is common to the Option and
Context menu).</p>
  </li>
</ol>
      <h2 id="context-menu---press-and-hold">
        
        
          Context Menu - Press and hold <a href="#context-menu---press-and-hold">#</a>
        
        
      </h2>
    

<p>The first step in hooking up your menus to an Activity is to create them (which is already shown
above). The 2nd step is to hook into the Activity’s menu creation methods to call your code, which
creates these menu items.</p>

<p>Here’s the code to bind the menu items to a ListView component, so when you press-and-hold this
component, it will pop up a context menu:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Override</span> <span class="kd">protected</span> <span class="kt">void</span> <span class="nf">onCreate</span><span class="o">(</span><span class="nc">Bundle</span> <span class="n">bundle</span><span class="o">)</span> <span class="o">{</span>

  <span class="c1">// wire up the listview to have a press-hold/context menu</span>
  <span class="nc">View</span> <span class="n">listview</span> <span class="o">=</span> <span class="o">...</span>
  <span class="n">listview</span><span class="o">.</span><span class="na">setOnPopulateContextMenuListener</span><span class="o">(</span><span class="k">this</span><span class="o">);</span>

<span class="o">}</span>

<span class="cm">/** press-hold/context menu */</span>
<span class="kd">public</span> <span class="kt">void</span> <span class="nf">onPopulateContextMenu</span><span class="o">(</span><span class="nc">ContextMenu</span> <span class="n">menu</span><span class="o">,</span>
                                  <span class="nc">View</span> <span class="n">view</span><span class="o">,</span>
                                  <span class="nc">Object</span> <span class="n">o</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">populateMenu</span><span class="o">(</span><span class="n">menu</span><span class="o">);</span>
<span class="o">}</span>

<span class="cm">/** when press-hold option selected */</span>
<span class="nd">@Override</span> <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">onContextItemSelected</span><span class="o">(</span><span class="nc">Menu</span><span class="o">.</span><span class="na">Item</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">return</span> <span class="nf">applyMenuChoice</span><span class="o">(</span><span class="n">item</span><span class="o">)</span> <span class="o">||</span> <span class="kd">super</span><span class="o">.</span><span class="na">onContextItemSelected</span><span class="o">(</span><span class="n">item</span><span class="o">);</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Here are some notes on this code:</p>

<ol>
  <li>
    <p>Just like with the Option menu, the Menu object is pre-created for you and passed to you.</p>
  </li>
  <li>
    <p>Unlike the Context menu example, you don’t override a method in your Activity class, you have to
call setOnPopulateContextMenuListener(…) on the component you want to bind the context menu
with.</p>
  </li>
  <li>
    <p>This onPopulateContextMenu(…) method is called every time the user performs a press-and-hold
operation on the ListView. This isn’t just created once (like the Option menu).</p>
  </li>
</ol>
      <h2 id="responding-to-menu-selection">
        
        
          Responding to menu selection <a href="#responding-to-menu-selection">#</a>
        
        
      </h2>
    

<p>Here’s the code to respond to the Menu item selection. Whether you are using a Context or Option
menu, this code is the same:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cm">/** respond to menu item selection */</span>
<span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">applyMenuChoice</span><span class="o">(</span><span class="nc">Menu</span><span class="o">.</span><span class="na">Item</span> <span class="n">item</span><span class="o">)</span> <span class="o">{</span>
  <span class="k">switch</span> <span class="o">(</span><span class="n">item</span><span class="o">.</span><span class="na">getId</span><span class="o">())</span> <span class="o">{</span>
    <span class="k">case</span> <span class="nl">Menu1:</span>
      <span class="nc">AppUtils</span><span class="o">.</span><span class="na">showToastShort</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">"MenuOption1 is selected"</span><span class="o">);</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">case</span> <span class="nl">Menu2:</span>
      <span class="nc">AppUtils</span><span class="o">.</span><span class="na">showToastShort</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">"MenuOption2 is selected"</span><span class="o">);</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">case</span> <span class="nl">Menu3:</span>
      <span class="nc">AppUtils</span><span class="o">.</span><span class="na">showToastShort</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">"MenuOption3 is selected"</span><span class="o">);</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">case</span> <span class="nl">Menu4:</span>
      <span class="nc">AppUtils</span><span class="o">.</span><span class="na">showToastShort</span><span class="o">(</span><span class="k">this</span><span class="o">,</span> <span class="s">"MenuOption4 is selected"</span><span class="o">);</span>
      <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
  <span class="o">}</span>
  <span class="k">return</span> <span class="kc">false</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Here are some notes on the code:</p>

<ol>
  <li>
    <p>The code to respond to menu selection can be shared between Context and Option menu items, as in
this example.</p>
  </li>
  <li>
    <p>The correlation Id used to identify which Menu.Item was selected are constant integers: Menu1,
Menu2, Menu3, and Menu4, which are declared in previous sections.</p>
  </li>
  <li>
    <p>AppUtils.showToastShort() simply calls Toast.makeText() to display a short text message on the
screen.</p>
  </li>
</ol>
      <h2 id="using-images-in-menus">
        
        
          Using images in menus <a href="#using-images-in-menus">#</a>
        
        
      </h2>
    

<p>You can use drawable resources to create a menu item with. However, if these images are too big,
they might not look right in a small Option or Context menu display. Here’s code that you can use to
resize Drawable resources/images to whatever size you want before assigning them to a menu item:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="nc">Drawable</span> <span class="nf">resizeImage</span><span class="o">(</span><span class="nc">Context</span> <span class="n">ctx</span><span class="o">,</span>
                                   <span class="kt">int</span> <span class="n">resId</span><span class="o">,</span>
                                   <span class="kt">int</span> <span class="n">w</span><span class="o">,</span>
                                   <span class="kt">int</span> <span class="n">h</span><span class="o">)</span> <span class="o">{</span>

  <span class="c1">// load the origial Bitmap</span>
  <span class="nc">Bitmap</span> <span class="nc">BitmapOrg</span> <span class="o">=</span> <span class="nc">BitmapFactory</span>
        <span class="o">.</span><span class="na">decodeResource</span><span class="o">(</span><span class="n">ctx</span><span class="o">.</span><span class="na">getResources</span><span class="o">(),</span> <span class="n">resId</span><span class="o">);</span>

  <span class="kt">int</span> <span class="n">width</span> <span class="o">=</span> <span class="nc">BitmapOrg</span><span class="o">.</span><span class="na">width</span><span class="o">();</span>
  <span class="kt">int</span> <span class="n">height</span> <span class="o">=</span> <span class="nc">BitmapOrg</span><span class="o">.</span><span class="na">height</span><span class="o">();</span>
  <span class="kt">int</span> <span class="n">newWidth</span> <span class="o">=</span> <span class="n">w</span><span class="o">;</span>
  <span class="kt">int</span> <span class="n">newHeight</span> <span class="o">=</span> <span class="n">h</span><span class="o">;</span>

  <span class="c1">// calculate the scale</span>
  <span class="kt">float</span> <span class="n">scaleWidth</span> <span class="o">=</span> <span class="o">((</span><span class="kt">float</span><span class="o">)</span> <span class="n">newWidth</span><span class="o">)</span> <span class="o">/</span> <span class="n">width</span><span class="o">;</span>
  <span class="kt">float</span> <span class="n">scaleHeight</span> <span class="o">=</span> <span class="o">((</span><span class="kt">float</span><span class="o">)</span> <span class="n">newHeight</span><span class="o">)</span> <span class="o">/</span> <span class="n">height</span><span class="o">;</span>

  <span class="c1">// create a matrix for the manipulation</span>
  <span class="nc">Matrix</span> <span class="n">matrix</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Matrix</span><span class="o">();</span>
  <span class="c1">// resize the Bitmap</span>
  <span class="n">matrix</span><span class="o">.</span><span class="na">postScale</span><span class="o">(</span><span class="n">scaleWidth</span><span class="o">,</span> <span class="n">scaleHeight</span><span class="o">);</span>
  <span class="c1">// if you want to rotate the Bitmap</span>
  <span class="c1">// matrix.postRotate(45);</span>

  <span class="c1">// recreate the new Bitmap</span>
  <span class="nc">Bitmap</span> <span class="n">resizedBitmap</span> <span class="o">=</span> <span class="nc">Bitmap</span><span class="o">.</span><span class="na">createBitmap</span><span class="o">(</span>
          <span class="nc">BitmapOrg</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">,</span> <span class="n">width</span><span class="o">,</span> <span class="n">height</span><span class="o">,</span> <span class="n">matrix</span><span class="o">,</span> <span class="kc">true</span><span class="o">);</span>

  <span class="c1">// make a Drawable from Bitmap to allow to set the Bitmap</span>
  <span class="c1">// to the ImageView, ImageButton or what ever</span>
  <span class="k">return</span> <span class="k">new</span> <span class="nf">BitmapDrawable</span><span class="o">(</span><span class="n">resizedBitmap</span><span class="o">);</span>

<span class="o">}</span>
</code></pre></div></div>

        <!--
    Display all the categories for this page
    More info:
    - Tutorial - http://tinyurl.com/yc6fq6zx
    - Liquid language reference - http://tinyurl.com/y8s4qpwo
-->
<div class="categories-block">
    
    
    <span class="category">
            <a href="/category/Android">
                #android</a>
        </span>
    
</div>

        
<blockquote>

  👀 Watch Rust 🦀 live coding videos on our <a
  href="https://www.youtube.com/@developerlifecom">YouTube Channel</a>.

  <br/>
  <br/>

  <!-- video on rust polymorphism (no playlist) -->
  <iframe
      src="https://www.youtube.com/embed/kYTgGtJjSro?si=XmW-_CAvCfB5e269"
      title="YouTube video player" frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen
      >
  </iframe>

  <br/>
  <br/>

  📦 Install our useful Rust command line apps using <code>cargo install r3bl-cmdr</code>
  (they are from the <a href="https://github.com/r3bl-org/r3bl-open-core">r3bl-open-core</a>
  project):
  <ul>
    <li>🐱<code>giti</code>: run interactive git commands with confidence in your terminal</li>
    <li>🦜<code>edi</code>: edit Markdown with style in your terminal</li>
  </ul>

  <p>
  <kbd>giti in action</kbd>
  <video width="100%" controls>
    <source src="https://github.com/nazmulidris/developerlife.com/assets/2966499/262f59d1-a95c-4af3-accf-c3d6cac6e586" type="video/mp4"/>
  </video>
  </p>

  <p>
  <kbd>edi in action</kbd>
  <video width="100%" controls>
    <source src="https://github.com/nazmulidris/developerlife.com/assets/2966499/f2c4b07d-b5a2-4f41-af7a-06d1b6660c41" type="video/mp4"/>
  </video>
  </p>

  </blockquote>

        <!--
    Display related posts (by category)
    More info:
    - Tutorial - http://tinyurl.com/j5tevq7
    - Liquid language reference - http://tinyurl.com/y9ru5msq
-->
<div class="related-post-block">

    <h3>Related Posts</h3>

    <!-- Get all the related posts into the string `postsString`-->
    
    
    

    <!--
        At this point `postsString` string might look like:
        Post 3|Post 1|Post 3|Post 2|Post 1|Post 3|Post 2|
    -->

    <!-- Remove all the dupes from the `postsString` string, and split it into an array -->
    

    <ul>
        
            
                
                <li>
                    <a class="post-list" href="/2020/07/11/annotation-processing-kotlin-android/">
                        Annotation Processing in Kotlin and Android
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2019/05/11/kotlin-vs-java/">
                        Java vs Kotlin for Android development
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2018/10/21/dagger2-in-depth/">
                        In-depth exploration of Dagger 2
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2018/07/21/designing-for-multiple-screen-densities-on-android/">
                        Designing for multiple screen densities on Android
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/12/07/introduction-to-android-architecture-components/">
                        Introduction to Android Architecture Components
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/12/02/android-downloadable-fonts/">
                        Android Downloadable Fonts
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/07/29/getting-started-with-mediaplayer-on-android/">
                        Getting started with MediaPlayer on Android
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/07/09/android-o-n-and-below-component-lifecycles-and-background-tasks/">
                        Deep dive into Android Services
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/04/26/flexbox-layouts-and-lists-with-react-native/">
                        Flexbox layouts and lists with React Native
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/04/14/navigation-and-styling-with-react-native/">
                        Navigation and Styling with React Native
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/03/31/getting-started-with-react-native/">
                        Getting started with React Native
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2017/01/27/native-android-redux-and-firebase/">
                        Android, Redux, Firebase Auth &amp; Database, and Material Design
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2010/10/20/gps/">
                        Android Location Providers (gps, network, passive)
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2010/10/12/android-event-dispatch-thread-or-main-thread/">
                        Android Event Dispatch Thread or Main Thread
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2009/03/06/using-json-for-mobile-object-exchange/">
                        Using JSON for mobile object exchange
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/08/05/android-animation-framework/">
                        Android Animation Framework Tutorial
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/08/04/android-listview/">
                        Android ListView and custom adapter Tutorial
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/08/04/android-linearlayout/">
                        Android LinearLayout Tutorial
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/07/31/android-ui-themes/">
                        Android UI Themes Tutorial
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/07/29/android-tablelayout/">
                        Android TableLayout Tutorial
                    </a>
                </li>
            
        
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/07/16/android-xml-view-inflation/">
                        Android XML View inflation Tutorial
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/07/14/android-app-lifecycle-activity-intent-and-service-draft/">
                        Android Activity and sub-Activity Tutorial
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/06/04/how-to-build-a-service-enabled-android-app-part-33-multithreading/">
                        Android - How to build a service-enabled Android app - Part 3/3 Multithreading
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/06/04/how-to-build-a-service-enabled-android-app-part-13-ui/">
                        Android - How to build a service-enabled Android app - Part 1/3 UI
                    </a>
                </li>
            
        
            
                
                <li>
                    <a class="post-list" href="/2008/06/04/how-to-build-a-service-enabled-android-app-part-23-networking/">
                        Android - How to build a service-enabled Android App - Part 2/3 Networking
                    </a>
                </li>
            
        
    </ul>

</div>

        <a class="u-url" href="/2008/07/16/option-and-context-menu/" hidden></a>
    </div></article>
</div>
      </main><div>
  <section class="sidebar">
    <!-- video on intro to testing (with playlist) -->
    <!-- <iframe
      src="https://www.youtube.com/embed/videoseries?si=7gmhXY5DVYJG7OdU&amp;list=PLofhE49PEwmwLR_4Noa0dFOSPmSpIg_l8"
      title="YouTube video player"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen
    >
    </iframe> -->

    <!-- rust async readline and spinner & playlist -->
    <!-- <iframe
      src="https://www.youtube.com/embed/videoseries?si=i37Ei9nCfvslOoaI&amp;list=PLofhE49PEwmwelPkhfiqdFQ9IXnmGdnSE"
      title="YouTube video player"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen
    >
    </iframe> -->

    <!-- effective async rust & playlist -->
    <iframe
    src="https://www.youtube.com/embed/qvIt8MF-pCM?si=S40pbhnvVDAohj-6"
      title="YouTube video player"
      frameborder="0"
      allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
      referrerpolicy="strict-origin-when-cross-origin"
      allowfullscreen>
    </iframe>
    <h2 class="star-us-github-heading">
      Subscribe to our
      <a href="https://www.youtube.com/@developerlifecom">YT Channel</a
      ><span class="heading-emoji"> 🦀</span>
    </h2>

    <hr />

    <h2 class="star-us-github-heading">
      Use our crates & apps<span class="heading-emoji"> 📦</span>
    </h2>

    <ul class="sidebar-ul">
      <li class="app-container">
        <a href="https://github.com/r3bl-org/r3bl-open-core/tree/main/cmdr" target="_blank">
          <img class="star-icon-img" src="/assets/r3bl-apps.svg" />
          <div class="sidebar-list-item">
            <p class="p-tag">INSTALL & USE OUR APPS (giti, edi)</p>
            <h3 class="sidebar-h3"><code>r3bl-cmdr</code></h3>
          </div>
        </a>
      </li>
      <li class="app-container">
        <a href="https://github.com/r3bl-org/r3bl-open-core/tree/main/tui" target="_blank">
          <img class="star-icon-img" src="/assets/crate.png" />
          <div class="sidebar-list-item">
            <p class="p-tag">R3BL TUI LIB</p>
            <h3 class="sidebar-h3"><code>r3bl_tui</code></h3>
          </div>
        </a>
      </li>
      <li class="app-container">
        <a href="https://chromewebstore.google.com/detail/r3bl-shortlink/ffhfkgcfbjoadmhdmdcmigopbfkddial?hl=en-US&gl=US" target="_blank">
          <img class="star-icon-img" src="/assets/r3bl-shortlink.svg" />
          <div class="sidebar-list-item">
            <p class="p-tag">SHORTLINK browser extension</p>
            <h3 class="sidebar-h3"><code>shortlink</code></h3>
          </div>
        </a>
      </li>
      <!-- <li class="app-container">
        <a href="https://github.com/r3bl-org/r3bl-open-core/tree/main/tuify" target="_blank">
          <img class="star-icon-img" src="/assets/crate.png" />
          <div class="sidebar-list-item">
            <p class="p-tag">R3BL TUIFY LIB</p>
            <h3 class="sidebar-h3"><code>r3bl_tuify</code></h3>
          </div>
        </a>
      </li>
      <li class="app-container">
        <a
          href="https://github.com/r3bl-org/r3bl-open-core/tree/main/terminal_async"
          target="_blank"
        >
          <img class="star-icon-img" src="/assets/crate.png" />
          <div class="sidebar-list-item">
            <p class="p-tag">R3BL TERMINAL ASYNC LIB</p>
            <h3 class="sidebar-h3"><code>r3bl_terminal_async</code></h3>
          </div>
        </a>
      </li> -->
    </ul>

    <hr />

    <h2 class="star-us-github-heading">
      Join our <a href="https://discord.gg/PhuF4qFpcA">Discord</a>
      <span class="heading-emoji"> 💬</span>
    </h2>

  </section>
</div>
</div><footer class="site-footer h-card">

    <div class="wrapper">

        <div class="footer-col-wrapper">

            <div class="footer-col"><!-- <p>
    developerlife.com site was started in Nov 1998 with coverage for
    topics related to Java, XML, and web and desktop technologies.
    Today it covers Kotlin, TypeScript, Node.js, React, Android, JDK,
    Web, Cloud technologies, User Experience Engineering (UXE)
    and design topics. © Nazmul Idris 2022. All rights reserved.
</p> -->
<div>
  <p class="footer-p">
    developerlife.com site was started in Nov 1998 by <a href="https://developerlife.com/about-me/">Nazmul Idris</a>, with coverage for topics related to Java, XML,
    and web and desktop technologies. Today it covers Rust, TUI, CLI, Kotlin, TypeScript, Node.js, React, Android,
    JDK, Web, Cloud technologies, User Experience Engineering (UXE) and design topics. © Nazmul
    Idris 2022. All rights reserved.
  </p>
  <div class="footer-container">
    <!-- element 1 -->
    <kbd>
      <a class="footer-elem-1" href="/subscribe.html" target="_blank"
        >Subscribe for updates</a
      >
    </kbd>

    <!-- element 2 -->
    <kbd>
      <a class="footer-elem-2" href="https://r3bl.com" target="_blank">Sponsored by R3BL</a>
    </kbd>
  </div>
</div>
</div>

        </div>

    </div>

</footer>
<script>
//open external links in a new window
function external_new_window() {
    for(var c = document.getElementsByTagName("a"), a = 0;a < c.length;a++) {
    var b = c[a];
    b.getAttribute("href") && b.hostname !== location.hostname && (b.target = "_blank")
    }
}
//open PDF links in a new window
function pdf_new_window ()
{
    if (!document.getElementsByTagName) return false;
    var links = document.getElementsByTagName("a");
    for (var eleLink=0; eleLink < links.length; eleLink ++) {
    if ((links[eleLink].href.indexOf('.pdf') !== -1)||(links[eleLink].href.indexOf('.doc') !== -1)||(links[eleLink].href.indexOf('.docx') !== -1)) {
        links[eleLink].onclick =
        function() {
            window.open(this.href);
            return false;
        }
    }
    }
} 
pdf_new_window()
external_new_window();
</script></body>
</html>
